{"ast":null,"code":"import React,{useEffect,useRef,useState,useCallback}from'react';import{stateFilingData}from'../data/stateFilingData';import{getConditionalText}from'../data/stateFilingData';import{jsx as _jsx}from\"react/jsx-runtime\";const USMap=_ref=>{let{selectedStates,filingType,onStateClick}=_ref;const svgContainerRef=useRef(null);const[svgLoaded,setSvgLoaded]=useState(false);const[tooltip,setTooltip]=useState(null);const updateMap=useCallback(()=>{if(!svgContainerRef.current)return;// Reset all states to default light grey\nconst stateElements=svgContainerRef.current.querySelectorAll('.state');stateElements.forEach(stateElement=>{stateElement.classList.remove('filing-required','no-filing','conditional-filing');stateElement.style.setProperty('fill','#f0f0f0','important');});// Color selected states based on filing requirements\nselectedStates.forEach(stateAbbr=>{const stateElement=svgContainerRef.current.querySelector(\"#\".concat(stateAbbr));if(stateElement){const stateData=stateFilingData[stateAbbr];const filingStatus=stateData.forms[filingType];if(filingStatus==='required'){stateElement.classList.add('filing-required');stateElement.style.fill='#28a745';}else if(filingStatus==='conditional'){stateElement.classList.add('conditional-filing');stateElement.style.fill='#ffc107';}else if(filingStatus==='not-required'){stateElement.classList.add('no-filing');stateElement.style.fill='#6c757d';}}});// Update text colors\nupdateTextColors();},[selectedStates,filingType]);const updateTextColors=useCallback(()=>{if(!svgContainerRef.current)return;const textElements=svgContainerRef.current.querySelectorAll('text[data-state-id]');textElements.forEach(textElement=>{const stateId=textElement.getAttribute('data-state-id');if(stateId&&stateId.length===2){const stateElement=svgContainerRef.current.querySelector(\"#\".concat(stateId));if(stateElement){let textColor='#000000';// Default to black\nif(stateElement.classList.contains('filing-required')||stateElement.style.fill==='#28a745'){textColor='#ffffff';// White for green\n}else if(stateElement.classList.contains('no-filing')||stateElement.style.fill==='#6c757d'){textColor='#ffffff';// White for grey\n}else if(stateElement.classList.contains('conditional-filing')||stateElement.style.fill==='#ffc107'){textColor='#000000';// Black for yellow\n}textElement.style.setProperty('fill',textColor,'important');textElement.setAttribute('fill',textColor);}}});},[]);const loadSVGMap=useCallback(async()=>{try{const response=await fetch('/us.svg');if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const svgContent=await response.text();if(svgContainerRef.current){svgContainerRef.current.innerHTML=svgContent;const svg=svgContainerRef.current.querySelector('svg');if(svg){svg.classList.add('usa-map');svg.setAttribute('viewBox','0 0 1200 700');svg.style.width='115%';svg.style.height='auto';svg.style.minHeight='920px';svg.style.margin='0 auto';// Add state classes and event listeners\nconst states=svg.querySelectorAll('path[id]');let labeledStates=0;let tooltipStates=0;states.forEach(state=>{// Remove any existing fill colors and styles from SVG\nstate.removeAttribute('style');state.removeAttribute('fill');// Set default styling\nstate.style.setProperty('fill','#f0f0f0','important');state.style.cursor='pointer';state.style.transition='fill 0.3s, stroke-width 0.3s';state.style.position='relative';// Add state class\nstate.classList.add('state','clickable');// Add state abbreviation labels\nif(addStateLabel(state)){labeledStates++;}// Add hover tooltip\naddStateTooltip(state);tooltipStates++;// Add click functionality\naddStateClickHandler(state);console.log(\"Initialized \".concat(state.id,\" with fill: \").concat(state.style.fill));});console.log(\"Loaded \".concat(states.length,\" states from SVG\"));console.log(\"Added labels to \".concat(labeledStates,\" states\"));console.log(\"Added tooltips to \".concat(tooltipStates,\" states\"));}// Add legend overlay\naddLegendOverlay();setSvgLoaded(true);}}catch(error){console.error('Error loading SVG:',error);if(svgContainerRef.current){svgContainerRef.current.innerHTML=\"\\n          <div style=\\\"text-align: center; padding: 30px; color: #721c24; background: #f8d7da; border: 1px solid #f5c6cb; border-radius: 8px; max-width: 600px; margin: 0 auto;\\\">\\n            <h4 style=\\\"margin-top: 0; color: #721c24;\\\">Error Loading Map</h4>\\n            <p style=\\\"margin-bottom: 20px;\\\">Unable to load the US map.</p>\\n            <p><strong>Error:</strong> \".concat(error.message,\"</p>\\n            <p>Please try refreshing the page or check the browser console for more details.</p>\\n          </div>\\n        \");}}},[]);useEffect(()=>{loadSVGMap();},[loadSVGMap]);useEffect(()=>{if(svgLoaded){updateMap();}},[svgLoaded,updateMap]);const addStateLabel=stateElement=>{const stateId=stateElement.id;if(stateId&&stateFilingData[stateId]){// Check if state is suitable for text display\nif(!isStateSuitableForText(stateElement)){return false;}const bbox=stateElement.getBBox();// Create text element for state abbreviation\nconst text=document.createElementNS('http://www.w3.org/2000/svg','text');text.setAttribute('text-anchor','middle');text.setAttribute('dominant-baseline','middle');text.setAttribute('font-size','12');text.setAttribute('font-weight','bold');text.setAttribute('fill','#000000');text.setAttribute('data-state-id',stateId);text.textContent=stateId;// Check for custom positioning for problematic states\nconst customPosition=getCustomStatePosition(stateId,bbox);if(customPosition){text.setAttribute('x',customPosition.x);text.setAttribute('y',customPosition.y);// Add the text to the SVG\nstateElement.parentNode.appendChild(text);return true;}// Find the best position for the text using the general algorithm\nconst bestPosition=findOptimalTextPosition(stateElement,bbox);if(bestPosition){text.setAttribute('x',bestPosition.x);text.setAttribute('y',bestPosition.y);// Add the text to the SVG\nstateElement.parentNode.appendChild(text);return true;}}return false;};const isStateSuitableForText=stateElement=>{const stateId=stateElement.id;// Explicitly exclude Hawaii, Maryland, and Massachusetts\nif(stateId==='HI'||stateId==='MD'||stateId==='MA'){return false;}const bbox=stateElement.getBBox();// Check if state is too small\nif(bbox.width<30||bbox.height<30){return false;}// Check if state has reasonable aspect ratio\nconst aspectRatio=bbox.width/bbox.height;if(aspectRatio<0.3||aspectRatio>3.5){return false;}// Check if the bounding box area is reasonable\nconst area=bbox.width*bbox.height;if(area<500){return false;}return true;};const findOptimalTextPosition=(stateElement,bbox)=>{// Check if state is too small for text\nif(bbox.width<28||bbox.height<20){return null;}// Use bounding box center\nreturn{x:bbox.x+bbox.width/2,y:bbox.y+bbox.height/2};};const getCustomStatePosition=(stateId,bbox)=>{// Custom positioning for specific problematic states\nswitch(stateId){case'FL':return{x:bbox.x+bbox.width*0.78,y:bbox.y+bbox.height*0.45};case'LA':return{x:bbox.x+bbox.width*0.35,y:bbox.y+bbox.height*0.6};case'WV':return{x:bbox.x+bbox.width*0.45,y:bbox.y+bbox.height*0.55};case'MD':case'MA':return null;// Don't show labels for these states\ncase'MI':return{x:bbox.x+bbox.width*0.7,y:bbox.y+bbox.height*0.7};case'MN':return{x:bbox.x+bbox.width*0.45,y:bbox.y+bbox.height*0.6};case'KY':return{x:bbox.x+bbox.width*0.55,y:bbox.y+bbox.height*0.5};case'CA':return{x:bbox.x+bbox.width*0.5,y:bbox.y+bbox.height*0.6};case'WA':return{x:bbox.x+bbox.width*0.6,y:bbox.y+bbox.height*0.5};case'ID':return{x:bbox.x+bbox.width*0.5,y:bbox.y+bbox.height*0.7};case'WI':return{x:bbox.x+bbox.width*0.5,y:bbox.y+bbox.height*0.55};case'TN':return{x:bbox.x+bbox.width*0.5,y:bbox.y+bbox.height*0.55};case'AK':const akX=bbox.x+bbox.width*0.7;const akY=bbox.y+bbox.height*0.44;const finalAkX=Math.max(bbox.x+30,Math.min(akX,bbox.x+bbox.width-30));const finalAkY=Math.max(bbox.y+30,Math.min(akY,bbox.y+bbox.height-30));return{x:finalAkX,y:finalAkY};case'HI':return null;// Don't show label for Hawaii\ndefault:return null;// Use general algorithm for other states\n}};const addStateTooltip=stateElement=>{const stateId=stateElement.id;if(stateId&&stateFilingData[stateId]){const stateData=stateFilingData[stateId];stateElement.addEventListener('mouseenter',e=>{// Create comprehensive tooltip content\nlet tooltipContent=\"<div class=\\\"tooltip-header\\\">\".concat(stateData.name,\" (\").concat(stateId,\")</div>\");// Add warnings and advisories\nlet hasWarnings=false;let warningsContent='';if(stateData.cityReturns){hasWarnings=true;if(stateData.cityReturns.type==='all'){warningsContent+=\"\\n              <div class=\\\"city-returns-warning\\\" style=\\\"margin: 0; font-size: 11px;\\\">\\n                <strong>\\u26A0\\uFE0F All Cities Must File</strong>\\n              </div>\\n            \";}else if(stateData.cityReturns.type==='specific'&&stateData.cityReturns.cities.length>0){warningsContent+=\"\\n              <div class=\\\"city-returns-advisory\\\" style=\\\"margin: 0; font-size: 11px;\\\">\\n                <strong>\\u2139\\uFE0F City Returns: \".concat(stateData.cityReturns.cities.join(', '),\"</strong>\\n              </div>\\n            \");}}// Add conditional filing note if applicable\nconst hasConditional=Object.values(stateData.forms).some(status=>status==='conditional');if(hasConditional){hasWarnings=true;if(warningsContent){warningsContent=\"\\n              <div style=\\\"display: flex; gap: 10px; margin-bottom: 20px;\\\">\\n                <div style=\\\"flex: 1;\\\">\".concat(warningsContent,\"</div>\\n                <div style=\\\"flex: 1;\\\">\\n                  <div class=\\\"tooltip-note\\\" style=\\\"margin: 0; font-size: 11px;\\\">\\n                    <strong>Conditional: \").concat(getConditionalText(stateId),\"</strong>\\n                  </div>\\n                </div>\\n              </div>\\n            \");}else{warningsContent=\"\\n              <div class=\\\"tooltip-note\\\" style=\\\"margin: 0 0 20px 0; font-size: 11px;\\\">\\n                <strong>Conditional: \".concat(getConditionalText(stateId),\"</strong>\\n              </div>\\n            \");}}else if(warningsContent){warningsContent=\"<div style=\\\"margin-bottom: 20px;\\\">\".concat(warningsContent,\"</div>\");}if(hasWarnings){tooltipContent+=warningsContent;}// Add filing requirements with status indicators\nconst formTypes=[{key:'1120S',name:'S Corporation (1120S)'},{key:'1065',name:'Partnership (1065)'},{key:'1120',name:'C Corporation (1120)'},{key:'1040',name:'Individual (1040)'}];formTypes.forEach(form=>{const status=stateData.forms[form.key];const statusClass=status==='required'?'status-required':status==='conditional'?'status-conditional':'status-not-required';const statusText=status==='required'?'Required':status==='conditional'?'Conditional':'Not Required';tooltipContent+=\"\\n            <div class=\\\"tooltip-row\\\">\\n              <span class=\\\"form-name\\\">\".concat(form.name,\":</span>\\n              <span class=\\\"status \").concat(statusClass,\"\\\">\").concat(statusText,\"</span>\\n            </div>\\n          \");});// Create tooltip element\nconst tooltipElement=document.createElement('div');tooltipElement.className='state-tooltip';tooltipElement.innerHTML=tooltipContent;tooltipElement.style.position='absolute';tooltipElement.style.left=e.pageX+15+'px';tooltipElement.style.top=e.pageY-15+'px';tooltipElement.style.background='white';tooltipElement.style.color='#495057';tooltipElement.style.padding='25px';tooltipElement.style.borderRadius='12px';tooltipElement.style.fontSize='14px';tooltipElement.style.zIndex='1000';tooltipElement.style.pointerEvents='none';tooltipElement.style.boxShadow='0 8px 32px rgba(0,0,0,0.15)';tooltipElement.style.border='1px solid #e9ecef';tooltipElement.style.minWidth='400px';tooltipElement.style.maxWidth='450px';tooltipElement.style.lineHeight='1.6';document.body.appendChild(tooltipElement);setTooltip(tooltipElement);});stateElement.addEventListener('mousemove',e=>{if(tooltip){const tooltipRect=tooltip.getBoundingClientRect();const viewportWidth=window.innerWidth;const viewportHeight=window.innerHeight;let left=e.pageX+15;let top=e.pageY-15;// Adjust horizontal position if tooltip would go off-screen\nif(left+tooltipRect.width>viewportWidth-20){left=e.pageX-tooltipRect.width-15;}// Adjust vertical position if tooltip would go off-screen\nif(top+tooltipRect.height>viewportHeight-20){top=e.pageY-tooltipRect.height-15;}tooltip.style.left=left+'px';tooltip.style.top=top+'px';}});stateElement.addEventListener('mouseleave',()=>{if(tooltip){document.body.removeChild(tooltip);setTooltip(null);}});}};const addStateClickHandler=stateElement=>{const stateId=stateElement.id;stateElement.addEventListener('click',e=>{// Prevent tooltip from interfering with click\nif(tooltip){document.body.removeChild(tooltip);setTooltip(null);}// Clear any hover styles that might be persisting\nstateElement.style.strokeWidth='';stateElement.style.stroke='';// Call the parent component's click handler\nonStateClick(stateId);});};const addLegendOverlay=()=>{if(!svgContainerRef.current)return;const legendOverlay=document.createElement('div');legendOverlay.className='legend-overlay';legendOverlay.innerHTML=\"\\n      <div class=\\\"legend-item\\\">\\n        <div class=\\\"legend-color\\\" style=\\\"background: #28a745;\\\"></div>\\n        <span>Filing Required</span>\\n      </div>\\n      <div class=\\\"legend-item\\\">\\n        <div class=\\\"legend-color\\\" style=\\\"background: #6c757d;\\\"></div>\\n        <span>No Filing Required</span>\\n      </div>\\n      <div class=\\\"legend-item\\\">\\n        <div class=\\\"legend-color\\\" style=\\\"background: #ffc107;\\\"></div>\\n        <span>Conditional Filing</span>\\n      </div>\\n      <div class=\\\"legend-item\\\">\\n        <div class=\\\"legend-color\\\" style=\\\"background: #ffffff; border: 1px solid #333;\\\"></div>\\n        <span>Not Selected</span>\\n      </div>\\n    \";// Insert legend overlay at the beginning of the SVG container\nsvgContainerRef.current.insertBefore(legendOverlay,svgContainerRef.current.firstChild);};return/*#__PURE__*/_jsx(\"div\",{id:\"svgContainer\",ref:svgContainerRef});};export default USMap;","map":{"version":3,"names":["React","useEffect","useRef","useState","useCallback","stateFilingData","getConditionalText","jsx","_jsx","USMap","_ref","selectedStates","filingType","onStateClick","svgContainerRef","svgLoaded","setSvgLoaded","tooltip","setTooltip","updateMap","current","stateElements","querySelectorAll","forEach","stateElement","classList","remove","style","setProperty","stateAbbr","querySelector","concat","stateData","filingStatus","forms","add","fill","updateTextColors","textElements","textElement","stateId","getAttribute","length","textColor","contains","setAttribute","loadSVGMap","response","fetch","ok","Error","status","svgContent","text","innerHTML","svg","width","height","minHeight","margin","states","labeledStates","tooltipStates","state","removeAttribute","cursor","transition","position","addStateLabel","addStateTooltip","addStateClickHandler","console","log","id","addLegendOverlay","error","message","isStateSuitableForText","bbox","getBBox","document","createElementNS","textContent","customPosition","getCustomStatePosition","x","y","parentNode","appendChild","bestPosition","findOptimalTextPosition","aspectRatio","area","akX","akY","finalAkX","Math","max","min","finalAkY","addEventListener","e","tooltipContent","name","hasWarnings","warningsContent","cityReturns","type","cities","join","hasConditional","Object","values","some","formTypes","key","form","statusClass","statusText","tooltipElement","createElement","className","left","pageX","top","pageY","background","color","padding","borderRadius","fontSize","zIndex","pointerEvents","boxShadow","border","minWidth","maxWidth","lineHeight","body","tooltipRect","getBoundingClientRect","viewportWidth","window","innerWidth","viewportHeight","innerHeight","removeChild","strokeWidth","stroke","legendOverlay","insertBefore","firstChild","ref"],"sources":["/Users/arielkeren/Desktop/GitHub/TaxFiling/src/components/USMap.js"],"sourcesContent":["import React, { useEffect, useRef, useState, useCallback } from 'react';\nimport { stateFilingData } from '../data/stateFilingData';\nimport { getConditionalText } from '../data/stateFilingData';\n\nconst USMap = ({ selectedStates, filingType, onStateClick }) => {\n  const svgContainerRef = useRef(null);\n  const [svgLoaded, setSvgLoaded] = useState(false);\n  const [tooltip, setTooltip] = useState(null);\n\n  const updateMap = useCallback(() => {\n    if (!svgContainerRef.current) return;\n    \n    // Reset all states to default light grey\n    const stateElements = svgContainerRef.current.querySelectorAll('.state');\n    stateElements.forEach(stateElement => {\n      stateElement.classList.remove('filing-required', 'no-filing', 'conditional-filing');\n      stateElement.style.setProperty('fill', '#f0f0f0', 'important');\n    });\n    \n    // Color selected states based on filing requirements\n    selectedStates.forEach(stateAbbr => {\n      const stateElement = svgContainerRef.current.querySelector(`#${stateAbbr}`);\n      if (stateElement) {\n        const stateData = stateFilingData[stateAbbr];\n        const filingStatus = stateData.forms[filingType];\n        \n        if (filingStatus === 'required') {\n          stateElement.classList.add('filing-required');\n          stateElement.style.fill = '#28a745';\n        } else if (filingStatus === 'conditional') {\n          stateElement.classList.add('conditional-filing');\n          stateElement.style.fill = '#ffc107';\n        } else if (filingStatus === 'not-required') {\n          stateElement.classList.add('no-filing');\n          stateElement.style.fill = '#6c757d';\n        }\n      }\n    });\n    \n    // Update text colors\n    updateTextColors();\n  }, [selectedStates, filingType]);\n\n  const updateTextColors = useCallback(() => {\n    if (!svgContainerRef.current) return;\n    \n    const textElements = svgContainerRef.current.querySelectorAll('text[data-state-id]');\n    \n    textElements.forEach(textElement => {\n      const stateId = textElement.getAttribute('data-state-id');\n      if (stateId && stateId.length === 2) {\n        const stateElement = svgContainerRef.current.querySelector(`#${stateId}`);\n        \n        if (stateElement) {\n          let textColor = '#000000'; // Default to black\n          \n          if (stateElement.classList.contains('filing-required') || stateElement.style.fill === '#28a745') {\n            textColor = '#ffffff'; // White for green\n          } else if (stateElement.classList.contains('no-filing') || stateElement.style.fill === '#6c757d') {\n            textColor = '#ffffff'; // White for grey\n          } else if (stateElement.classList.contains('conditional-filing') || stateElement.style.fill === '#ffc107') {\n            textColor = '#000000'; // Black for yellow\n          }\n          \n          textElement.style.setProperty('fill', textColor, 'important');\n          textElement.setAttribute('fill', textColor);\n        }\n      }\n    });\n  }, []);\n\n  const loadSVGMap = useCallback(async () => {\n    try {\n      const response = await fetch('/us.svg');\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const svgContent = await response.text();\n      \n      if (svgContainerRef.current) {\n        svgContainerRef.current.innerHTML = svgContent;\n        \n        const svg = svgContainerRef.current.querySelector('svg');\n        if (svg) {\n          svg.classList.add('usa-map');\n          svg.setAttribute('viewBox', '0 0 1200 700');\n          svg.style.width = '115%';\n          svg.style.height = 'auto';\n          svg.style.minHeight = '920px';\n          svg.style.margin = '0 auto';\n          \n          // Add state classes and event listeners\n          const states = svg.querySelectorAll('path[id]');\n          let labeledStates = 0;\n          let tooltipStates = 0;\n          \n          states.forEach(state => {\n            // Remove any existing fill colors and styles from SVG\n            state.removeAttribute('style');\n            state.removeAttribute('fill');\n            \n            // Set default styling\n            state.style.setProperty('fill', '#f0f0f0', 'important');\n            state.style.cursor = 'pointer';\n            state.style.transition = 'fill 0.3s, stroke-width 0.3s';\n            state.style.position = 'relative';\n            \n            // Add state class\n            state.classList.add('state', 'clickable');\n            \n            // Add state abbreviation labels\n            if (addStateLabel(state)) {\n              labeledStates++;\n            }\n            \n            // Add hover tooltip\n            addStateTooltip(state);\n            tooltipStates++;\n            \n            // Add click functionality\n            addStateClickHandler(state);\n            \n            console.log(`Initialized ${state.id} with fill: ${state.style.fill}`);\n          });\n          \n          console.log(`Loaded ${states.length} states from SVG`);\n          console.log(`Added labels to ${labeledStates} states`);\n          console.log(`Added tooltips to ${tooltipStates} states`);\n        }\n        \n        // Add legend overlay\n        addLegendOverlay();\n        \n        setSvgLoaded(true);\n      }\n    } catch (error) {\n      console.error('Error loading SVG:', error);\n      if (svgContainerRef.current) {\n        svgContainerRef.current.innerHTML = `\n          <div style=\"text-align: center; padding: 30px; color: #721c24; background: #f8d7da; border: 1px solid #f5c6cb; border-radius: 8px; max-width: 600px; margin: 0 auto;\">\n            <h4 style=\"margin-top: 0; color: #721c24;\">Error Loading Map</h4>\n            <p style=\"margin-bottom: 20px;\">Unable to load the US map.</p>\n            <p><strong>Error:</strong> ${error.message}</p>\n            <p>Please try refreshing the page or check the browser console for more details.</p>\n          </div>\n        `;\n      }\n    }\n  }, []);\n\n  useEffect(() => {\n    loadSVGMap();\n  }, [loadSVGMap]);\n\n  useEffect(() => {\n    if (svgLoaded) {\n      updateMap();\n    }\n  }, [svgLoaded, updateMap]);\n\n  const addStateLabel = (stateElement) => {\n    const stateId = stateElement.id;\n    \n    if (stateId && stateFilingData[stateId]) {\n      // Check if state is suitable for text display\n      if (!isStateSuitableForText(stateElement)) {\n        return false;\n      }\n      \n      const bbox = stateElement.getBBox();\n      \n      // Create text element for state abbreviation\n      const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n      text.setAttribute('text-anchor', 'middle');\n      text.setAttribute('dominant-baseline', 'middle');\n      text.setAttribute('font-size', '12');\n      text.setAttribute('font-weight', 'bold');\n      text.setAttribute('fill', '#000000');\n      text.setAttribute('data-state-id', stateId);\n      text.textContent = stateId;\n      \n      // Check for custom positioning for problematic states\n      const customPosition = getCustomStatePosition(stateId, bbox);\n      \n      if (customPosition) {\n        text.setAttribute('x', customPosition.x);\n        text.setAttribute('y', customPosition.y);\n        \n        // Add the text to the SVG\n        stateElement.parentNode.appendChild(text);\n        return true;\n      }\n      \n      // Find the best position for the text using the general algorithm\n      const bestPosition = findOptimalTextPosition(stateElement, bbox);\n      if (bestPosition) {\n        text.setAttribute('x', bestPosition.x);\n        text.setAttribute('y', bestPosition.y);\n        \n        // Add the text to the SVG\n        stateElement.parentNode.appendChild(text);\n        return true;\n      }\n    }\n    return false;\n  };\n\n  const isStateSuitableForText = (stateElement) => {\n    const stateId = stateElement.id;\n    \n    // Explicitly exclude Hawaii, Maryland, and Massachusetts\n    if (stateId === 'HI' || stateId === 'MD' || stateId === 'MA') {\n      return false;\n    }\n    \n    const bbox = stateElement.getBBox();\n    \n    // Check if state is too small\n    if (bbox.width < 30 || bbox.height < 30) {\n      return false;\n    }\n    \n    // Check if state has reasonable aspect ratio\n    const aspectRatio = bbox.width / bbox.height;\n    if (aspectRatio < 0.3 || aspectRatio > 3.5) {\n      return false;\n    }\n    \n    // Check if the bounding box area is reasonable\n    const area = bbox.width * bbox.height;\n    if (area < 500) {\n      return false;\n    }\n    \n    return true;\n  };\n\n  const findOptimalTextPosition = (stateElement, bbox) => {\n    // Check if state is too small for text\n    if (bbox.width < 28 || bbox.height < 20) {\n      return null;\n    }\n    \n    // Use bounding box center\n    return { \n      x: bbox.x + bbox.width / 2, \n      y: bbox.y + bbox.height / 2 \n    };\n  };\n\n  const getCustomStatePosition = (stateId, bbox) => {\n    // Custom positioning for specific problematic states\n    switch (stateId) {\n      case 'FL':\n        return {\n          x: bbox.x + bbox.width * 0.78,\n          y: bbox.y + bbox.height * 0.45\n        };\n      case 'LA':\n        return {\n          x: bbox.x + bbox.width * 0.35,\n          y: bbox.y + bbox.height * 0.6\n        };\n      case 'WV':\n        return {\n          x: bbox.x + bbox.width * 0.45,\n          y: bbox.y + bbox.height * 0.55\n        };\n      case 'MD':\n      case 'MA':\n        return null; // Don't show labels for these states\n      case 'MI':\n        return {\n          x: bbox.x + bbox.width * 0.7,\n          y: bbox.y + bbox.height * 0.7\n        };\n      case 'MN':\n        return {\n          x: bbox.x + bbox.width * 0.45,\n          y: bbox.y + bbox.height * 0.6\n        };\n      case 'KY':\n        return {\n          x: bbox.x + bbox.width * 0.55,\n          y: bbox.y + bbox.height * 0.5\n        };\n      case 'CA':\n        return {\n          x: bbox.x + bbox.width * 0.5,\n          y: bbox.y + bbox.height * 0.6\n        };\n      case 'WA':\n        return {\n          x: bbox.x + bbox.width * 0.6,\n          y: bbox.y + bbox.height * 0.5\n        };\n      case 'ID':\n        return {\n          x: bbox.x + bbox.width * 0.5,\n          y: bbox.y + bbox.height * 0.7\n        };\n      case 'WI':\n        return {\n          x: bbox.x + bbox.width * 0.5,\n          y: bbox.y + bbox.height * 0.55\n        };\n      case 'TN':\n        return {\n          x: bbox.x + bbox.width * 0.5,\n          y: bbox.y + bbox.height * 0.55\n        };\n      case 'AK':\n        const akX = bbox.x + bbox.width * 0.7;\n        const akY = bbox.y + bbox.height * 0.44;\n        const finalAkX = Math.max(bbox.x + 30, Math.min(akX, bbox.x + bbox.width - 30));\n        const finalAkY = Math.max(bbox.y + 30, Math.min(akY, bbox.y + bbox.height - 30));\n        return { x: finalAkX, y: finalAkY };\n      case 'HI':\n        return null; // Don't show label for Hawaii\n      default:\n        return null; // Use general algorithm for other states\n    }\n  };\n\n  const addStateTooltip = (stateElement) => {\n    const stateId = stateElement.id;\n    if (stateId && stateFilingData[stateId]) {\n      const stateData = stateFilingData[stateId];\n      \n      stateElement.addEventListener('mouseenter', (e) => {\n        // Create comprehensive tooltip content\n        let tooltipContent = `<div class=\"tooltip-header\">${stateData.name} (${stateId})</div>`;\n        \n        // Add warnings and advisories\n        let hasWarnings = false;\n        let warningsContent = '';\n        \n        if (stateData.cityReturns) {\n          hasWarnings = true;\n          if (stateData.cityReturns.type === 'all') {\n            warningsContent += `\n              <div class=\"city-returns-warning\" style=\"margin: 0; font-size: 11px;\">\n                <strong>⚠️ All Cities Must File</strong>\n              </div>\n            `;\n          } else if (stateData.cityReturns.type === 'specific' && stateData.cityReturns.cities.length > 0) {\n            warningsContent += `\n              <div class=\"city-returns-advisory\" style=\"margin: 0; font-size: 11px;\">\n                <strong>ℹ️ City Returns: ${stateData.cityReturns.cities.join(', ')}</strong>\n              </div>\n            `;\n          }\n        }\n        \n        // Add conditional filing note if applicable\n        const hasConditional = Object.values(stateData.forms).some(status => status === 'conditional');\n        if (hasConditional) {\n          hasWarnings = true;\n          if (warningsContent) {\n            warningsContent = `\n              <div style=\"display: flex; gap: 10px; margin-bottom: 20px;\">\n                <div style=\"flex: 1;\">${warningsContent}</div>\n                <div style=\"flex: 1;\">\n                  <div class=\"tooltip-note\" style=\"margin: 0; font-size: 11px;\">\n                    <strong>Conditional: ${getConditionalText(stateId)}</strong>\n                  </div>\n                </div>\n              </div>\n            `;\n          } else {\n            warningsContent = `\n              <div class=\"tooltip-note\" style=\"margin: 0 0 20px 0; font-size: 11px;\">\n                <strong>Conditional: ${getConditionalText(stateId)}</strong>\n              </div>\n            `;\n          }\n        } else if (warningsContent) {\n          warningsContent = `<div style=\"margin-bottom: 20px;\">${warningsContent}</div>`;\n        }\n        \n        if (hasWarnings) {\n          tooltipContent += warningsContent;\n        }\n        \n        // Add filing requirements with status indicators\n        const formTypes = [\n          { key: '1120S', name: 'S Corporation (1120S)' },\n          { key: '1065', name: 'Partnership (1065)' },\n          { key: '1120', name: 'C Corporation (1120)' },\n          { key: '1040', name: 'Individual (1040)' }\n        ];\n        \n        formTypes.forEach(form => {\n          const status = stateData.forms[form.key];\n          const statusClass = status === 'required' ? 'status-required' : \n                            status === 'conditional' ? 'status-conditional' : 'status-not-required';\n          const statusText = status === 'required' ? 'Required' : \n                           status === 'conditional' ? 'Conditional' : 'Not Required';\n          \n          tooltipContent += `\n            <div class=\"tooltip-row\">\n              <span class=\"form-name\">${form.name}:</span>\n              <span class=\"status ${statusClass}\">${statusText}</span>\n            </div>\n          `;\n        });\n        \n        // Create tooltip element\n        const tooltipElement = document.createElement('div');\n        tooltipElement.className = 'state-tooltip';\n        tooltipElement.innerHTML = tooltipContent;\n        tooltipElement.style.position = 'absolute';\n        tooltipElement.style.left = e.pageX + 15 + 'px';\n        tooltipElement.style.top = e.pageY - 15 + 'px';\n        tooltipElement.style.background = 'white';\n        tooltipElement.style.color = '#495057';\n        tooltipElement.style.padding = '25px';\n        tooltipElement.style.borderRadius = '12px';\n        tooltipElement.style.fontSize = '14px';\n        tooltipElement.style.zIndex = '1000';\n        tooltipElement.style.pointerEvents = 'none';\n        tooltipElement.style.boxShadow = '0 8px 32px rgba(0,0,0,0.15)';\n        tooltipElement.style.border = '1px solid #e9ecef';\n        tooltipElement.style.minWidth = '400px';\n        tooltipElement.style.maxWidth = '450px';\n        tooltipElement.style.lineHeight = '1.6';\n        \n        document.body.appendChild(tooltipElement);\n        setTooltip(tooltipElement);\n      });\n      \n      stateElement.addEventListener('mousemove', (e) => {\n        if (tooltip) {\n          const tooltipRect = tooltip.getBoundingClientRect();\n          const viewportWidth = window.innerWidth;\n          const viewportHeight = window.innerHeight;\n          \n          let left = e.pageX + 15;\n          let top = e.pageY - 15;\n          \n          // Adjust horizontal position if tooltip would go off-screen\n          if (left + tooltipRect.width > viewportWidth - 20) {\n            left = e.pageX - tooltipRect.width - 15;\n          }\n          \n          // Adjust vertical position if tooltip would go off-screen\n          if (top + tooltipRect.height > viewportHeight - 20) {\n            top = e.pageY - tooltipRect.height - 15;\n          }\n          \n          tooltip.style.left = left + 'px';\n          tooltip.style.top = top + 'px';\n        }\n      });\n      \n      stateElement.addEventListener('mouseleave', () => {\n        if (tooltip) {\n          document.body.removeChild(tooltip);\n          setTooltip(null);\n        }\n      });\n    }\n  };\n\n  const addStateClickHandler = (stateElement) => {\n    const stateId = stateElement.id;\n    \n    stateElement.addEventListener('click', (e) => {\n      // Prevent tooltip from interfering with click\n      if (tooltip) {\n        document.body.removeChild(tooltip);\n        setTooltip(null);\n      }\n      \n      // Clear any hover styles that might be persisting\n      stateElement.style.strokeWidth = '';\n      stateElement.style.stroke = '';\n      \n      // Call the parent component's click handler\n      onStateClick(stateId);\n    });\n  };\n\n  const addLegendOverlay = () => {\n    if (!svgContainerRef.current) return;\n    \n    const legendOverlay = document.createElement('div');\n    legendOverlay.className = 'legend-overlay';\n    legendOverlay.innerHTML = `\n      <div class=\"legend-item\">\n        <div class=\"legend-color\" style=\"background: #28a745;\"></div>\n        <span>Filing Required</span>\n      </div>\n      <div class=\"legend-item\">\n        <div class=\"legend-color\" style=\"background: #6c757d;\"></div>\n        <span>No Filing Required</span>\n      </div>\n      <div class=\"legend-item\">\n        <div class=\"legend-color\" style=\"background: #ffc107;\"></div>\n        <span>Conditional Filing</span>\n      </div>\n      <div class=\"legend-item\">\n        <div class=\"legend-color\" style=\"background: #ffffff; border: 1px solid #333;\"></div>\n        <span>Not Selected</span>\n      </div>\n    `;\n    \n    // Insert legend overlay at the beginning of the SVG container\n    svgContainerRef.current.insertBefore(legendOverlay, svgContainerRef.current.firstChild);\n  };\n\n  return (\n    <div id=\"svgContainer\" ref={svgContainerRef}>\n      {/* SVG will be loaded here */}\n    </div>\n  );\n};\n\nexport default USMap; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}