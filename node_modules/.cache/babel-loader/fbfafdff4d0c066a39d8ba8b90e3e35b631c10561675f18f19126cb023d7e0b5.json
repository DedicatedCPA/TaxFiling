{"ast":null,"code":"import React,{useEffect,useRef,useState}from'react';import{stateFilingData}from'../data/stateFilingData';import{getConditionalText}from'../data/stateFilingData';import{jsx as _jsx}from\"react/jsx-runtime\";const USMap=_ref=>{let{selectedStates,filingType,onStateClick}=_ref;const svgContainerRef=useRef(null);const[svgLoaded,setSvgLoaded]=useState(false);const[tooltip,setTooltip]=useState(null);const[tooltipPosition,setTooltipPosition]=useState({x:0,y:0});useEffect(()=>{loadSVGMap();},[]);useEffect(()=>{if(svgLoaded){updateMap();}},[selectedStates,filingType,svgLoaded]);const loadSVGMap=async()=>{try{const response=await fetch('/us.svg');if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const svgContent=await response.text();if(svgContainerRef.current){svgContainerRef.current.innerHTML=svgContent;const svg=svgContainerRef.current.querySelector('svg');if(svg){svg.classList.add('usa-map');svg.setAttribute('viewBox','0 0 1200 700');svg.style.width='115%';svg.style.height='auto';svg.style.minHeight='920px';svg.style.margin='0 auto';// Add state classes and event listeners\nconst states=svg.querySelectorAll('path[id]');let labeledStates=0;let tooltipStates=0;states.forEach(state=>{// Remove any existing fill colors and styles from SVG\nstate.removeAttribute('style');state.removeAttribute('fill');// Set default styling\nstate.style.setProperty('fill','#f0f0f0','important');state.style.cursor='pointer';state.style.transition='fill 0.3s, stroke-width 0.3s';state.style.position='relative';// Add state class\nstate.classList.add('state','clickable');// Add state abbreviation labels\nif(addStateLabel(state)){labeledStates++;}// Add hover tooltip\naddStateTooltip(state);tooltipStates++;// Add click functionality\naddStateClickHandler(state);console.log(\"Initialized \".concat(state.id,\" with fill: \").concat(state.style.fill));});console.log(\"Loaded \".concat(states.length,\" states from SVG\"));console.log(\"Added labels to \".concat(labeledStates,\" states\"));console.log(\"Added tooltips to \".concat(tooltipStates,\" states\"));}// Add legend overlay\naddLegendOverlay();setSvgLoaded(true);}}catch(error){console.error('Error loading SVG:',error);if(svgContainerRef.current){svgContainerRef.current.innerHTML=\"\\n          <div style=\\\"text-align: center; padding: 30px; color: #721c24; background: #f8d7da; border: 1px solid #f5c6cb; border-radius: 8px; max-width: 600px; margin: 0 auto;\\\">\\n            <h4 style=\\\"margin-top: 0; color: #721c24;\\\">Error Loading Map</h4>\\n            <p style=\\\"margin-bottom: 20px;\\\">Unable to load the US map.</p>\\n            <p><strong>Error:</strong> \".concat(error.message,\"</p>\\n            <p>Please try refreshing the page or check the browser console for more details.</p>\\n          </div>\\n        \");}}};const updateMap=()=>{if(!svgContainerRef.current)return;// Reset all states to default light grey\nconst stateElements=svgContainerRef.current.querySelectorAll('.state');stateElements.forEach(stateElement=>{stateElement.classList.remove('filing-required','no-filing','conditional-filing');stateElement.style.setProperty('fill','#f0f0f0','important');});// Color selected states based on filing requirements\nselectedStates.forEach(stateAbbr=>{const stateElement=svgContainerRef.current.querySelector(\"#\".concat(stateAbbr));if(stateElement){const stateData=stateFilingData[stateAbbr];const filingStatus=stateData.forms[filingType];if(filingStatus==='required'){stateElement.classList.add('filing-required');stateElement.style.fill='#28a745';}else if(filingStatus==='conditional'){stateElement.classList.add('conditional-filing');stateElement.style.fill='#ffc107';}else if(filingStatus==='not-required'){stateElement.classList.add('no-filing');stateElement.style.fill='#6c757d';}}});// Update text colors\nupdateTextColors();};const updateTextColors=()=>{const textElements=svgContainerRef.current.querySelectorAll('text[data-state-id]');textElements.forEach(textElement=>{const stateId=textElement.getAttribute('data-state-id');if(stateId&&stateId.length===2){const stateElement=svgContainerRef.current.querySelector(\"#\".concat(stateId));if(stateElement){let textColor='#000000';// Default to black\nif(stateElement.classList.contains('filing-required')||stateElement.style.fill==='#28a745'){textColor='#ffffff';// White for green\n}else if(stateElement.classList.contains('no-filing')||stateElement.style.fill==='#6c757d'){textColor='#ffffff';// White for grey\n}else if(stateElement.classList.contains('conditional-filing')||stateElement.style.fill==='#ffc107'){textColor='#000000';// Black for yellow\n}textElement.style.setProperty('fill',textColor,'important');textElement.setAttribute('fill',textColor);}}});};const addStateLabel=stateElement=>{const stateId=stateElement.id;if(stateId&&stateFilingData[stateId]){// Check if state is suitable for text display\nif(!isStateSuitableForText(stateElement)){return false;}const bbox=stateElement.getBBox();// Create text element for state abbreviation\nconst text=document.createElementNS('http://www.w3.org/2000/svg','text');text.setAttribute('text-anchor','middle');text.setAttribute('dominant-baseline','middle');text.setAttribute('font-size','12');text.setAttribute('font-weight','bold');text.setAttribute('fill','#000000');text.setAttribute('data-state-id',stateId);text.textContent=stateId;// Check for custom positioning for problematic states\nconst customPosition=getCustomStatePosition(stateId,bbox);if(customPosition){text.setAttribute('x',customPosition.x);text.setAttribute('y',customPosition.y);// Add the text to the SVG\nstateElement.parentNode.appendChild(text);return true;}// Find the best position for the text using the general algorithm\nconst bestPosition=findOptimalTextPosition(stateElement,bbox);if(bestPosition){text.setAttribute('x',bestPosition.x);text.setAttribute('y',bestPosition.y);// Add the text to the SVG\nstateElement.parentNode.appendChild(text);return true;}}return false;};const isStateSuitableForText=stateElement=>{const stateId=stateElement.id;// Explicitly exclude Hawaii, Maryland, and Massachusetts\nif(stateId==='HI'||stateId==='MD'||stateId==='MA'){return false;}const bbox=stateElement.getBBox();// Check if state is too small\nif(bbox.width<30||bbox.height<30){return false;}// Check if state has reasonable aspect ratio\nconst aspectRatio=bbox.width/bbox.height;if(aspectRatio<0.3||aspectRatio>3.5){return false;}// Check if the bounding box area is reasonable\nconst area=bbox.width*bbox.height;if(area<500){return false;}return true;};const findOptimalTextPosition=(stateElement,bbox)=>{const textWidth=24;const textHeight=16;// Check if state is too small for text\nif(bbox.width<textWidth+4||bbox.height<textHeight+4){return null;}// Use bounding box center\nreturn{x:bbox.x+bbox.width/2,y:bbox.y+bbox.height/2};};const getCustomStatePosition=(stateId,bbox)=>{const textWidth=24;const textHeight=16;// Custom positioning for specific problematic states\nswitch(stateId){case'FL':return{x:bbox.x+bbox.width*0.78,y:bbox.y+bbox.height*0.45};case'LA':return{x:bbox.x+bbox.width*0.35,y:bbox.y+bbox.height*0.6};case'WV':return{x:bbox.x+bbox.width*0.45,y:bbox.y+bbox.height*0.55};case'MD':case'MA':return null;// Don't show labels for these states\ncase'MI':return{x:bbox.x+bbox.width*0.7,y:bbox.y+bbox.height*0.7};case'MN':return{x:bbox.x+bbox.width*0.45,y:bbox.y+bbox.height*0.6};case'KY':return{x:bbox.x+bbox.width*0.55,y:bbox.y+bbox.height*0.5};case'CA':return{x:bbox.x+bbox.width*0.5,y:bbox.y+bbox.height*0.6};case'WA':return{x:bbox.x+bbox.width*0.6,y:bbox.y+bbox.height*0.5};case'ID':return{x:bbox.x+bbox.width*0.5,y:bbox.y+bbox.height*0.7};case'WI':return{x:bbox.x+bbox.width*0.5,y:bbox.y+bbox.height*0.55};case'TN':return{x:bbox.x+bbox.width*0.5,y:bbox.y+bbox.height*0.55};case'AK':const akX=bbox.x+bbox.width*0.7;const akY=bbox.y+bbox.height*0.44;const finalAkX=Math.max(bbox.x+30,Math.min(akX,bbox.x+bbox.width-30));const finalAkY=Math.max(bbox.y+30,Math.min(akY,bbox.y+bbox.height-30));return{x:finalAkX,y:finalAkY};case'HI':return null;// Don't show label for Hawaii\ndefault:return null;// Use general algorithm for other states\n}};const addStateTooltip=stateElement=>{const stateId=stateElement.id;if(stateId&&stateFilingData[stateId]){const stateData=stateFilingData[stateId];stateElement.addEventListener('mouseenter',e=>{// Create comprehensive tooltip content\nlet tooltipContent=\"<div class=\\\"tooltip-header\\\">\".concat(stateData.name,\" (\").concat(stateId,\")</div>\");// Add warnings and advisories\nlet hasWarnings=false;let warningsContent='';if(stateData.cityReturns){hasWarnings=true;if(stateData.cityReturns.type==='all'){warningsContent+=\"\\n              <div class=\\\"city-returns-warning\\\" style=\\\"margin: 0; font-size: 11px;\\\">\\n                <strong>\\u26A0\\uFE0F All Cities Must File</strong>\\n              </div>\\n            \";}else if(stateData.cityReturns.type==='specific'&&stateData.cityReturns.cities.length>0){warningsContent+=\"\\n              <div class=\\\"city-returns-advisory\\\" style=\\\"margin: 0; font-size: 11px;\\\">\\n                <strong>\\u2139\\uFE0F City Returns: \".concat(stateData.cityReturns.cities.join(', '),\"</strong>\\n              </div>\\n            \");}}// Add conditional filing note if applicable\nconst hasConditional=Object.values(stateData.forms).some(status=>status==='conditional');if(hasConditional){hasWarnings=true;if(warningsContent){warningsContent=\"\\n              <div style=\\\"display: flex; gap: 10px; margin-bottom: 20px;\\\">\\n                <div style=\\\"flex: 1;\\\">\".concat(warningsContent,\"</div>\\n                <div style=\\\"flex: 1;\\\">\\n                  <div class=\\\"tooltip-note\\\" style=\\\"margin: 0; font-size: 11px;\\\">\\n                    <strong>Conditional: \").concat(getConditionalText(stateId),\"</strong>\\n                  </div>\\n                </div>\\n              </div>\\n            \");}else{warningsContent=\"\\n              <div class=\\\"tooltip-note\\\" style=\\\"margin: 0 0 20px 0; font-size: 11px;\\\">\\n                <strong>Conditional: \".concat(getConditionalText(stateId),\"</strong>\\n              </div>\\n            \");}}else if(warningsContent){warningsContent=\"<div style=\\\"margin-bottom: 20px;\\\">\".concat(warningsContent,\"</div>\");}if(hasWarnings){tooltipContent+=warningsContent;}// Add filing requirements with status indicators\nconst formTypes=[{key:'1120S',name:'S Corporation (1120S)'},{key:'1065',name:'Partnership (1065)'},{key:'1120',name:'C Corporation (1120)'},{key:'1040',name:'Individual (1040)'}];formTypes.forEach(form=>{const status=stateData.forms[form.key];const statusClass=status==='required'?'status-required':status==='conditional'?'status-conditional':'status-not-required';const statusText=status==='required'?'Required':status==='conditional'?'Conditional':'Not Required';tooltipContent+=\"\\n            <div class=\\\"tooltip-row\\\">\\n              <span class=\\\"form-name\\\">\".concat(form.name,\":</span>\\n              <span class=\\\"status \").concat(statusClass,\"\\\">\").concat(statusText,\"</span>\\n            </div>\\n          \");});// Create tooltip element\nconst tooltipElement=document.createElement('div');tooltipElement.className='state-tooltip';tooltipElement.innerHTML=tooltipContent;tooltipElement.style.position='absolute';tooltipElement.style.left=e.pageX+15+'px';tooltipElement.style.top=e.pageY-15+'px';tooltipElement.style.background='white';tooltipElement.style.color='#495057';tooltipElement.style.padding='25px';tooltipElement.style.borderRadius='12px';tooltipElement.style.fontSize='14px';tooltipElement.style.zIndex='1000';tooltipElement.style.pointerEvents='none';tooltipElement.style.boxShadow='0 8px 32px rgba(0,0,0,0.15)';tooltipElement.style.border='1px solid #e9ecef';tooltipElement.style.minWidth='400px';tooltipElement.style.maxWidth='450px';tooltipElement.style.lineHeight='1.6';document.body.appendChild(tooltipElement);setTooltip(tooltipElement);setTooltipPosition({x:e.pageX,y:e.pageY});});stateElement.addEventListener('mousemove',e=>{if(tooltip){const tooltipRect=tooltip.getBoundingClientRect();const viewportWidth=window.innerWidth;const viewportHeight=window.innerHeight;let left=e.pageX+15;let top=e.pageY-15;// Adjust horizontal position if tooltip would go off-screen\nif(left+tooltipRect.width>viewportWidth-20){left=e.pageX-tooltipRect.width-15;}// Adjust vertical position if tooltip would go off-screen\nif(top+tooltipRect.height>viewportHeight-20){top=e.pageY-tooltipRect.height-15;}tooltip.style.left=left+'px';tooltip.style.top=top+'px';}});stateElement.addEventListener('mouseleave',()=>{if(tooltip){document.body.removeChild(tooltip);setTooltip(null);}});}};const addStateClickHandler=stateElement=>{const stateId=stateElement.id;stateElement.addEventListener('click',e=>{// Prevent tooltip from interfering with click\nif(tooltip){document.body.removeChild(tooltip);setTooltip(null);}// Clear any hover styles that might be persisting\nstateElement.style.strokeWidth='';stateElement.style.stroke='';// Call the parent component's click handler\nonStateClick(stateId);});};const addLegendOverlay=()=>{if(!svgContainerRef.current)return;const legendOverlay=document.createElement('div');legendOverlay.className='legend-overlay';legendOverlay.innerHTML=\"\\n      <div class=\\\"legend-item\\\">\\n        <div class=\\\"legend-color\\\" style=\\\"background: #28a745;\\\"></div>\\n        <span>Filing Required</span>\\n      </div>\\n      <div class=\\\"legend-item\\\">\\n        <div class=\\\"legend-color\\\" style=\\\"background: #6c757d;\\\"></div>\\n        <span>No Filing Required</span>\\n      </div>\\n      <div class=\\\"legend-item\\\">\\n        <div class=\\\"legend-color\\\" style=\\\"background: #ffc107;\\\"></div>\\n        <span>Conditional Filing</span>\\n      </div>\\n      <div class=\\\"legend-item\\\">\\n        <div class=\\\"legend-color\\\" style=\\\"background: #ffffff; border: 1px solid #333;\\\"></div>\\n        <span>Not Selected</span>\\n      </div>\\n    \";// Insert legend overlay at the beginning of the SVG container\nsvgContainerRef.current.insertBefore(legendOverlay,svgContainerRef.current.firstChild);};return/*#__PURE__*/_jsx(\"div\",{id:\"svgContainer\",ref:svgContainerRef});};export default USMap;","map":{"version":3,"names":["React","useEffect","useRef","useState","stateFilingData","getConditionalText","jsx","_jsx","USMap","_ref","selectedStates","filingType","onStateClick","svgContainerRef","svgLoaded","setSvgLoaded","tooltip","setTooltip","tooltipPosition","setTooltipPosition","x","y","loadSVGMap","updateMap","response","fetch","ok","Error","concat","status","svgContent","text","current","innerHTML","svg","querySelector","classList","add","setAttribute","style","width","height","minHeight","margin","states","querySelectorAll","labeledStates","tooltipStates","forEach","state","removeAttribute","setProperty","cursor","transition","position","addStateLabel","addStateTooltip","addStateClickHandler","console","log","id","fill","length","addLegendOverlay","error","message","stateElements","stateElement","remove","stateAbbr","stateData","filingStatus","forms","updateTextColors","textElements","textElement","stateId","getAttribute","textColor","contains","isStateSuitableForText","bbox","getBBox","document","createElementNS","textContent","customPosition","getCustomStatePosition","parentNode","appendChild","bestPosition","findOptimalTextPosition","aspectRatio","area","textWidth","textHeight","akX","akY","finalAkX","Math","max","min","finalAkY","addEventListener","e","tooltipContent","name","hasWarnings","warningsContent","cityReturns","type","cities","join","hasConditional","Object","values","some","formTypes","key","form","statusClass","statusText","tooltipElement","createElement","className","left","pageX","top","pageY","background","color","padding","borderRadius","fontSize","zIndex","pointerEvents","boxShadow","border","minWidth","maxWidth","lineHeight","body","tooltipRect","getBoundingClientRect","viewportWidth","window","innerWidth","viewportHeight","innerHeight","removeChild","strokeWidth","stroke","legendOverlay","insertBefore","firstChild","ref"],"sources":["/Users/arielkeren/Desktop/GitHub/TaxFiling/src/components/USMap.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport { stateFilingData } from '../data/stateFilingData';\nimport { getConditionalText } from '../data/stateFilingData';\n\nconst USMap = ({ selectedStates, filingType, onStateClick }) => {\n  const svgContainerRef = useRef(null);\n  const [svgLoaded, setSvgLoaded] = useState(false);\n  const [tooltip, setTooltip] = useState(null);\n  const [tooltipPosition, setTooltipPosition] = useState({ x: 0, y: 0 });\n\n  useEffect(() => {\n    loadSVGMap();\n  }, []);\n\n  useEffect(() => {\n    if (svgLoaded) {\n      updateMap();\n    }\n  }, [selectedStates, filingType, svgLoaded]);\n\n  const loadSVGMap = async () => {\n    try {\n      const response = await fetch('/us.svg');\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const svgContent = await response.text();\n      \n      if (svgContainerRef.current) {\n        svgContainerRef.current.innerHTML = svgContent;\n        \n        const svg = svgContainerRef.current.querySelector('svg');\n        if (svg) {\n          svg.classList.add('usa-map');\n          svg.setAttribute('viewBox', '0 0 1200 700');\n          svg.style.width = '115%';\n          svg.style.height = 'auto';\n          svg.style.minHeight = '920px';\n          svg.style.margin = '0 auto';\n          \n          // Add state classes and event listeners\n          const states = svg.querySelectorAll('path[id]');\n          let labeledStates = 0;\n          let tooltipStates = 0;\n          \n          states.forEach(state => {\n            // Remove any existing fill colors and styles from SVG\n            state.removeAttribute('style');\n            state.removeAttribute('fill');\n            \n            // Set default styling\n            state.style.setProperty('fill', '#f0f0f0', 'important');\n            state.style.cursor = 'pointer';\n            state.style.transition = 'fill 0.3s, stroke-width 0.3s';\n            state.style.position = 'relative';\n            \n            // Add state class\n            state.classList.add('state', 'clickable');\n            \n            // Add state abbreviation labels\n            if (addStateLabel(state)) {\n              labeledStates++;\n            }\n            \n            // Add hover tooltip\n            addStateTooltip(state);\n            tooltipStates++;\n            \n            // Add click functionality\n            addStateClickHandler(state);\n            \n            console.log(`Initialized ${state.id} with fill: ${state.style.fill}`);\n          });\n          \n          console.log(`Loaded ${states.length} states from SVG`);\n          console.log(`Added labels to ${labeledStates} states`);\n          console.log(`Added tooltips to ${tooltipStates} states`);\n        }\n        \n        // Add legend overlay\n        addLegendOverlay();\n        \n        setSvgLoaded(true);\n      }\n    } catch (error) {\n      console.error('Error loading SVG:', error);\n      if (svgContainerRef.current) {\n        svgContainerRef.current.innerHTML = `\n          <div style=\"text-align: center; padding: 30px; color: #721c24; background: #f8d7da; border: 1px solid #f5c6cb; border-radius: 8px; max-width: 600px; margin: 0 auto;\">\n            <h4 style=\"margin-top: 0; color: #721c24;\">Error Loading Map</h4>\n            <p style=\"margin-bottom: 20px;\">Unable to load the US map.</p>\n            <p><strong>Error:</strong> ${error.message}</p>\n            <p>Please try refreshing the page or check the browser console for more details.</p>\n          </div>\n        `;\n      }\n    }\n  };\n\n  const updateMap = () => {\n    if (!svgContainerRef.current) return;\n    \n    // Reset all states to default light grey\n    const stateElements = svgContainerRef.current.querySelectorAll('.state');\n    stateElements.forEach(stateElement => {\n      stateElement.classList.remove('filing-required', 'no-filing', 'conditional-filing');\n      stateElement.style.setProperty('fill', '#f0f0f0', 'important');\n    });\n    \n    // Color selected states based on filing requirements\n    selectedStates.forEach(stateAbbr => {\n      const stateElement = svgContainerRef.current.querySelector(`#${stateAbbr}`);\n      if (stateElement) {\n        const stateData = stateFilingData[stateAbbr];\n        const filingStatus = stateData.forms[filingType];\n        \n        if (filingStatus === 'required') {\n          stateElement.classList.add('filing-required');\n          stateElement.style.fill = '#28a745';\n        } else if (filingStatus === 'conditional') {\n          stateElement.classList.add('conditional-filing');\n          stateElement.style.fill = '#ffc107';\n        } else if (filingStatus === 'not-required') {\n          stateElement.classList.add('no-filing');\n          stateElement.style.fill = '#6c757d';\n        }\n      }\n    });\n    \n    // Update text colors\n    updateTextColors();\n  };\n\n  const updateTextColors = () => {\n    const textElements = svgContainerRef.current.querySelectorAll('text[data-state-id]');\n    \n    textElements.forEach(textElement => {\n      const stateId = textElement.getAttribute('data-state-id');\n      if (stateId && stateId.length === 2) {\n        const stateElement = svgContainerRef.current.querySelector(`#${stateId}`);\n        \n        if (stateElement) {\n          let textColor = '#000000'; // Default to black\n          \n          if (stateElement.classList.contains('filing-required') || stateElement.style.fill === '#28a745') {\n            textColor = '#ffffff'; // White for green\n          } else if (stateElement.classList.contains('no-filing') || stateElement.style.fill === '#6c757d') {\n            textColor = '#ffffff'; // White for grey\n          } else if (stateElement.classList.contains('conditional-filing') || stateElement.style.fill === '#ffc107') {\n            textColor = '#000000'; // Black for yellow\n          }\n          \n          textElement.style.setProperty('fill', textColor, 'important');\n          textElement.setAttribute('fill', textColor);\n        }\n      }\n    });\n  };\n\n  const addStateLabel = (stateElement) => {\n    const stateId = stateElement.id;\n    \n    if (stateId && stateFilingData[stateId]) {\n      // Check if state is suitable for text display\n      if (!isStateSuitableForText(stateElement)) {\n        return false;\n      }\n      \n      const bbox = stateElement.getBBox();\n      \n      // Create text element for state abbreviation\n      const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n      text.setAttribute('text-anchor', 'middle');\n      text.setAttribute('dominant-baseline', 'middle');\n      text.setAttribute('font-size', '12');\n      text.setAttribute('font-weight', 'bold');\n      text.setAttribute('fill', '#000000');\n      text.setAttribute('data-state-id', stateId);\n      text.textContent = stateId;\n      \n      // Check for custom positioning for problematic states\n      const customPosition = getCustomStatePosition(stateId, bbox);\n      \n      if (customPosition) {\n        text.setAttribute('x', customPosition.x);\n        text.setAttribute('y', customPosition.y);\n        \n        // Add the text to the SVG\n        stateElement.parentNode.appendChild(text);\n        return true;\n      }\n      \n      // Find the best position for the text using the general algorithm\n      const bestPosition = findOptimalTextPosition(stateElement, bbox);\n      if (bestPosition) {\n        text.setAttribute('x', bestPosition.x);\n        text.setAttribute('y', bestPosition.y);\n        \n        // Add the text to the SVG\n        stateElement.parentNode.appendChild(text);\n        return true;\n      }\n    }\n    return false;\n  };\n\n  const isStateSuitableForText = (stateElement) => {\n    const stateId = stateElement.id;\n    \n    // Explicitly exclude Hawaii, Maryland, and Massachusetts\n    if (stateId === 'HI' || stateId === 'MD' || stateId === 'MA') {\n      return false;\n    }\n    \n    const bbox = stateElement.getBBox();\n    \n    // Check if state is too small\n    if (bbox.width < 30 || bbox.height < 30) {\n      return false;\n    }\n    \n    // Check if state has reasonable aspect ratio\n    const aspectRatio = bbox.width / bbox.height;\n    if (aspectRatio < 0.3 || aspectRatio > 3.5) {\n      return false;\n    }\n    \n    // Check if the bounding box area is reasonable\n    const area = bbox.width * bbox.height;\n    if (area < 500) {\n      return false;\n    }\n    \n    return true;\n  };\n\n  const findOptimalTextPosition = (stateElement, bbox) => {\n    const textWidth = 24;\n    const textHeight = 16;\n    \n    // Check if state is too small for text\n    if (bbox.width < textWidth + 4 || bbox.height < textHeight + 4) {\n      return null;\n    }\n    \n    // Use bounding box center\n    return { \n      x: bbox.x + bbox.width / 2, \n      y: bbox.y + bbox.height / 2 \n    };\n  };\n\n  const getCustomStatePosition = (stateId, bbox) => {\n    const textWidth = 24;\n    const textHeight = 16;\n    \n    // Custom positioning for specific problematic states\n    switch (stateId) {\n      case 'FL':\n        return {\n          x: bbox.x + bbox.width * 0.78,\n          y: bbox.y + bbox.height * 0.45\n        };\n      case 'LA':\n        return {\n          x: bbox.x + bbox.width * 0.35,\n          y: bbox.y + bbox.height * 0.6\n        };\n      case 'WV':\n        return {\n          x: bbox.x + bbox.width * 0.45,\n          y: bbox.y + bbox.height * 0.55\n        };\n      case 'MD':\n      case 'MA':\n        return null; // Don't show labels for these states\n      case 'MI':\n        return {\n          x: bbox.x + bbox.width * 0.7,\n          y: bbox.y + bbox.height * 0.7\n        };\n      case 'MN':\n        return {\n          x: bbox.x + bbox.width * 0.45,\n          y: bbox.y + bbox.height * 0.6\n        };\n      case 'KY':\n        return {\n          x: bbox.x + bbox.width * 0.55,\n          y: bbox.y + bbox.height * 0.5\n        };\n      case 'CA':\n        return {\n          x: bbox.x + bbox.width * 0.5,\n          y: bbox.y + bbox.height * 0.6\n        };\n      case 'WA':\n        return {\n          x: bbox.x + bbox.width * 0.6,\n          y: bbox.y + bbox.height * 0.5\n        };\n      case 'ID':\n        return {\n          x: bbox.x + bbox.width * 0.5,\n          y: bbox.y + bbox.height * 0.7\n        };\n      case 'WI':\n        return {\n          x: bbox.x + bbox.width * 0.5,\n          y: bbox.y + bbox.height * 0.55\n        };\n      case 'TN':\n        return {\n          x: bbox.x + bbox.width * 0.5,\n          y: bbox.y + bbox.height * 0.55\n        };\n      case 'AK':\n        const akX = bbox.x + bbox.width * 0.7;\n        const akY = bbox.y + bbox.height * 0.44;\n        const finalAkX = Math.max(bbox.x + 30, Math.min(akX, bbox.x + bbox.width - 30));\n        const finalAkY = Math.max(bbox.y + 30, Math.min(akY, bbox.y + bbox.height - 30));\n        return { x: finalAkX, y: finalAkY };\n      case 'HI':\n        return null; // Don't show label for Hawaii\n      default:\n        return null; // Use general algorithm for other states\n    }\n  };\n\n  const addStateTooltip = (stateElement) => {\n    const stateId = stateElement.id;\n    if (stateId && stateFilingData[stateId]) {\n      const stateData = stateFilingData[stateId];\n      \n      stateElement.addEventListener('mouseenter', (e) => {\n        // Create comprehensive tooltip content\n        let tooltipContent = `<div class=\"tooltip-header\">${stateData.name} (${stateId})</div>`;\n        \n        // Add warnings and advisories\n        let hasWarnings = false;\n        let warningsContent = '';\n        \n        if (stateData.cityReturns) {\n          hasWarnings = true;\n          if (stateData.cityReturns.type === 'all') {\n            warningsContent += `\n              <div class=\"city-returns-warning\" style=\"margin: 0; font-size: 11px;\">\n                <strong>⚠️ All Cities Must File</strong>\n              </div>\n            `;\n          } else if (stateData.cityReturns.type === 'specific' && stateData.cityReturns.cities.length > 0) {\n            warningsContent += `\n              <div class=\"city-returns-advisory\" style=\"margin: 0; font-size: 11px;\">\n                <strong>ℹ️ City Returns: ${stateData.cityReturns.cities.join(', ')}</strong>\n              </div>\n            `;\n          }\n        }\n        \n        // Add conditional filing note if applicable\n        const hasConditional = Object.values(stateData.forms).some(status => status === 'conditional');\n        if (hasConditional) {\n          hasWarnings = true;\n          if (warningsContent) {\n            warningsContent = `\n              <div style=\"display: flex; gap: 10px; margin-bottom: 20px;\">\n                <div style=\"flex: 1;\">${warningsContent}</div>\n                <div style=\"flex: 1;\">\n                  <div class=\"tooltip-note\" style=\"margin: 0; font-size: 11px;\">\n                    <strong>Conditional: ${getConditionalText(stateId)}</strong>\n                  </div>\n                </div>\n              </div>\n            `;\n          } else {\n            warningsContent = `\n              <div class=\"tooltip-note\" style=\"margin: 0 0 20px 0; font-size: 11px;\">\n                <strong>Conditional: ${getConditionalText(stateId)}</strong>\n              </div>\n            `;\n          }\n        } else if (warningsContent) {\n          warningsContent = `<div style=\"margin-bottom: 20px;\">${warningsContent}</div>`;\n        }\n        \n        if (hasWarnings) {\n          tooltipContent += warningsContent;\n        }\n        \n        // Add filing requirements with status indicators\n        const formTypes = [\n          { key: '1120S', name: 'S Corporation (1120S)' },\n          { key: '1065', name: 'Partnership (1065)' },\n          { key: '1120', name: 'C Corporation (1120)' },\n          { key: '1040', name: 'Individual (1040)' }\n        ];\n        \n        formTypes.forEach(form => {\n          const status = stateData.forms[form.key];\n          const statusClass = status === 'required' ? 'status-required' : \n                            status === 'conditional' ? 'status-conditional' : 'status-not-required';\n          const statusText = status === 'required' ? 'Required' : \n                           status === 'conditional' ? 'Conditional' : 'Not Required';\n          \n          tooltipContent += `\n            <div class=\"tooltip-row\">\n              <span class=\"form-name\">${form.name}:</span>\n              <span class=\"status ${statusClass}\">${statusText}</span>\n            </div>\n          `;\n        });\n        \n        // Create tooltip element\n        const tooltipElement = document.createElement('div');\n        tooltipElement.className = 'state-tooltip';\n        tooltipElement.innerHTML = tooltipContent;\n        tooltipElement.style.position = 'absolute';\n        tooltipElement.style.left = e.pageX + 15 + 'px';\n        tooltipElement.style.top = e.pageY - 15 + 'px';\n        tooltipElement.style.background = 'white';\n        tooltipElement.style.color = '#495057';\n        tooltipElement.style.padding = '25px';\n        tooltipElement.style.borderRadius = '12px';\n        tooltipElement.style.fontSize = '14px';\n        tooltipElement.style.zIndex = '1000';\n        tooltipElement.style.pointerEvents = 'none';\n        tooltipElement.style.boxShadow = '0 8px 32px rgba(0,0,0,0.15)';\n        tooltipElement.style.border = '1px solid #e9ecef';\n        tooltipElement.style.minWidth = '400px';\n        tooltipElement.style.maxWidth = '450px';\n        tooltipElement.style.lineHeight = '1.6';\n        \n        document.body.appendChild(tooltipElement);\n        setTooltip(tooltipElement);\n        setTooltipPosition({ x: e.pageX, y: e.pageY });\n      });\n      \n      stateElement.addEventListener('mousemove', (e) => {\n        if (tooltip) {\n          const tooltipRect = tooltip.getBoundingClientRect();\n          const viewportWidth = window.innerWidth;\n          const viewportHeight = window.innerHeight;\n          \n          let left = e.pageX + 15;\n          let top = e.pageY - 15;\n          \n          // Adjust horizontal position if tooltip would go off-screen\n          if (left + tooltipRect.width > viewportWidth - 20) {\n            left = e.pageX - tooltipRect.width - 15;\n          }\n          \n          // Adjust vertical position if tooltip would go off-screen\n          if (top + tooltipRect.height > viewportHeight - 20) {\n            top = e.pageY - tooltipRect.height - 15;\n          }\n          \n          tooltip.style.left = left + 'px';\n          tooltip.style.top = top + 'px';\n        }\n      });\n      \n      stateElement.addEventListener('mouseleave', () => {\n        if (tooltip) {\n          document.body.removeChild(tooltip);\n          setTooltip(null);\n        }\n      });\n    }\n  };\n\n  const addStateClickHandler = (stateElement) => {\n    const stateId = stateElement.id;\n    \n    stateElement.addEventListener('click', (e) => {\n      // Prevent tooltip from interfering with click\n      if (tooltip) {\n        document.body.removeChild(tooltip);\n        setTooltip(null);\n      }\n      \n      // Clear any hover styles that might be persisting\n      stateElement.style.strokeWidth = '';\n      stateElement.style.stroke = '';\n      \n      // Call the parent component's click handler\n      onStateClick(stateId);\n    });\n  };\n\n  const addLegendOverlay = () => {\n    if (!svgContainerRef.current) return;\n    \n    const legendOverlay = document.createElement('div');\n    legendOverlay.className = 'legend-overlay';\n    legendOverlay.innerHTML = `\n      <div class=\"legend-item\">\n        <div class=\"legend-color\" style=\"background: #28a745;\"></div>\n        <span>Filing Required</span>\n      </div>\n      <div class=\"legend-item\">\n        <div class=\"legend-color\" style=\"background: #6c757d;\"></div>\n        <span>No Filing Required</span>\n      </div>\n      <div class=\"legend-item\">\n        <div class=\"legend-color\" style=\"background: #ffc107;\"></div>\n        <span>Conditional Filing</span>\n      </div>\n      <div class=\"legend-item\">\n        <div class=\"legend-color\" style=\"background: #ffffff; border: 1px solid #333;\"></div>\n        <span>Not Selected</span>\n      </div>\n    `;\n    \n    // Insert legend overlay at the beginning of the SVG container\n    svgContainerRef.current.insertBefore(legendOverlay, svgContainerRef.current.firstChild);\n  };\n\n  return (\n    <div id=\"svgContainer\" ref={svgContainerRef}>\n      {/* SVG will be loaded here */}\n    </div>\n  );\n};\n\nexport default USMap; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}