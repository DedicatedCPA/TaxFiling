{"ast":null,"code":"import React,{useEffect,useRef,useState,useCallback}from'react';import{stateFilingData}from'../data/stateFilingData';import{getConditionalText}from'../data/stateFilingData';import{jsx as _jsx}from\"react/jsx-runtime\";const USMap=_ref=>{let{selectedStates,filingType,onStateClick}=_ref;const svgContainerRef=useRef(null);const[svgLoaded,setSvgLoaded]=useState(false);const[tooltip,setTooltip]=useState(null);// Helper functions defined first\nconst addStateLabel=useCallback(stateElement=>{const stateId=stateElement.id;if(stateId&&stateFilingData[stateId]){// Check if state is suitable for text display\nif(!isStateSuitableForText(stateElement)){return false;}const bbox=stateElement.getBBox();// Create text element for state abbreviation\nconst text=document.createElementNS('http://www.w3.org/2000/svg','text');text.setAttribute('text-anchor','middle');text.setAttribute('dominant-baseline','middle');text.setAttribute('font-size','12');text.setAttribute('font-weight','bold');text.setAttribute('fill','#000000');text.setAttribute('data-state-id',stateId);text.textContent=stateId;// Check for custom positioning for problematic states\nconst customPosition=getCustomStatePosition(stateId,bbox);if(customPosition){text.setAttribute('x',customPosition.x);text.setAttribute('y',customPosition.y);// Add the text to the SVG\nstateElement.parentNode.appendChild(text);return true;}// Find the best position for the text using the general algorithm\nconst bestPosition=findOptimalTextPosition(stateElement,bbox);if(bestPosition){text.setAttribute('x',bestPosition.x);text.setAttribute('y',bestPosition.y);// Add the text to the SVG\nstateElement.parentNode.appendChild(text);return true;}}return false;},[]);const isStateSuitableForText=useCallback(stateElement=>{const stateId=stateElement.id;// Explicitly exclude Hawaii, Maryland, and Massachusetts\nif(stateId==='HI'||stateId==='MD'||stateId==='MA'){return false;}const bbox=stateElement.getBBox();// Check if state is too small\nif(bbox.width<30||bbox.height<30){return false;}// Check if state has reasonable aspect ratio\nconst aspectRatio=bbox.width/bbox.height;if(aspectRatio<0.3||aspectRatio>3.5){return false;}// Check if the bounding box area is reasonable\nconst area=bbox.width*bbox.height;if(area<500){return false;}return true;},[]);const findOptimalTextPosition=useCallback((stateElement,bbox)=>{// Check if state is too small for text\nif(bbox.width<28||bbox.height<20){return null;}// Use bounding box center\nreturn{x:bbox.x+bbox.width/2,y:bbox.y+bbox.height/2};},[]);const getCustomStatePosition=useCallback((stateId,bbox)=>{// Custom positioning for specific problematic states\nswitch(stateId){case'FL':return{x:bbox.x+bbox.width*0.78,y:bbox.y+bbox.height*0.45};case'LA':return{x:bbox.x+bbox.width*0.35,y:bbox.y+bbox.height*0.6};case'WV':return{x:bbox.x+bbox.width*0.45,y:bbox.y+bbox.height*0.55};case'MD':case'MA':return null;// Don't show labels for these states\ncase'MI':return{x:bbox.x+bbox.width*0.7,y:bbox.y+bbox.height*0.7};case'MN':return{x:bbox.x+bbox.width*0.45,y:bbox.y+bbox.height*0.6};case'KY':return{x:bbox.x+bbox.width*0.55,y:bbox.y+bbox.height*0.5};case'CA':return{x:bbox.x+bbox.width*0.5,y:bbox.y+bbox.height*0.6};case'WA':return{x:bbox.x+bbox.width*0.6,y:bbox.y+bbox.height*0.5};case'ID':return{x:bbox.x+bbox.width*0.5,y:bbox.y+bbox.height*0.7};case'WI':return{x:bbox.x+bbox.width*0.5,y:bbox.y+bbox.height*0.55};case'TN':return{x:bbox.x+bbox.width*0.5,y:bbox.y+bbox.height*0.55};case'AK':const akX=bbox.x+bbox.width*0.7;const akY=bbox.y+bbox.height*0.44;const finalAkX=Math.max(bbox.x+30,Math.min(akX,bbox.x+bbox.width-30));const finalAkY=Math.max(bbox.y+30,Math.min(akY,bbox.y+bbox.height-30));return{x:finalAkX,y:finalAkY};case'HI':return null;// Don't show label for Hawaii\ndefault:return null;// Use general algorithm for other states\n}},[]);const addStateTooltip=useCallback(stateElement=>{const stateId=stateElement.id;if(stateId&&stateFilingData[stateId]){const stateData=stateFilingData[stateId];stateElement.addEventListener('mouseenter',e=>{// Create comprehensive tooltip content\nlet tooltipContent=\"<div class=\\\"tooltip-header\\\">\".concat(stateData.name,\" (\").concat(stateId,\")</div>\");// Add warnings and advisories\nlet hasWarnings=false;let warningsContent='';if(stateData.cityReturns){hasWarnings=true;if(stateData.cityReturns.type==='all'){warningsContent+=\"\\n              <div class=\\\"city-returns-warning\\\" style=\\\"margin: 0; font-size: 11px;\\\">\\n                <strong>\\u26A0\\uFE0F All Cities Must File</strong>\\n              </div>\\n            \";}else if(stateData.cityReturns.type==='specific'&&stateData.cityReturns.cities.length>0){warningsContent+=\"\\n              <div class=\\\"city-returns-advisory\\\" style=\\\"margin: 0; font-size: 11px;\\\">\\n                <strong>\\u2139\\uFE0F City Returns: \".concat(stateData.cityReturns.cities.join(', '),\"</strong>\\n              </div>\\n            \");}}// Add conditional filing note if applicable\nconst hasConditional=Object.values(stateData.forms).some(status=>status==='conditional');if(hasConditional){hasWarnings=true;if(warningsContent){warningsContent=\"\\n              <div style=\\\"display: flex; gap: 10px; margin-bottom: 20px;\\\">\\n                <div style=\\\"flex: 1;\\\">\".concat(warningsContent,\"</div>\\n                <div style=\\\"flex: 1;\\\">\\n                  <div class=\\\"tooltip-note\\\" style=\\\"margin: 0; font-size: 11px;\\\">\\n                    <strong>Conditional: \").concat(getConditionalText(stateId),\"</strong>\\n                  </div>\\n                </div>\\n              </div>\\n            \");}else{warningsContent=\"\\n              <div class=\\\"tooltip-note\\\" style=\\\"margin: 0 0 20px 0; font-size: 11px;\\\">\\n                <strong>Conditional: \".concat(getConditionalText(stateId),\"</strong>\\n              </div>\\n            \");}}else if(warningsContent){warningsContent=\"<div style=\\\"margin-bottom: 20px;\\\">\".concat(warningsContent,\"</div>\");}if(hasWarnings){tooltipContent+=warningsContent;}// Add filing requirements with status indicators\nconst formTypes=[{key:'1120S',name:'S Corporation (1120S)'},{key:'1065',name:'Partnership (1065)'},{key:'1120',name:'C Corporation (1120)'},{key:'1040',name:'Individual (1040)'}];formTypes.forEach(form=>{const status=stateData.forms[form.key];const statusClass=status==='required'?'status-required':status==='conditional'?'status-conditional':'status-not-required';const statusText=status==='required'?'Required':status==='conditional'?'Conditional':'Not Required';tooltipContent+=\"\\n            <div class=\\\"tooltip-row\\\">\\n              <span class=\\\"form-name\\\">\".concat(form.name,\":</span>\\n              <span class=\\\"status \").concat(statusClass,\"\\\">\").concat(statusText,\"</span>\\n            </div>\\n          \");});// Create tooltip element\nconst tooltipElement=document.createElement('div');tooltipElement.className='state-tooltip';tooltipElement.innerHTML=tooltipContent;tooltipElement.style.position='absolute';tooltipElement.style.left=e.pageX+15+'px';tooltipElement.style.top=e.pageY-15+'px';tooltipElement.style.background='white';tooltipElement.style.color='#495057';tooltipElement.style.padding='25px';tooltipElement.style.borderRadius='12px';tooltipElement.style.fontSize='14px';tooltipElement.style.zIndex='1000';tooltipElement.style.pointerEvents='none';tooltipElement.style.boxShadow='0 8px 32px rgba(0,0,0,0.15)';tooltipElement.style.border='1px solid #e9ecef';tooltipElement.style.minWidth='400px';tooltipElement.style.maxWidth='450px';tooltipElement.style.lineHeight='1.6';document.body.appendChild(tooltipElement);setTooltip(tooltipElement);});stateElement.addEventListener('mousemove',e=>{if(tooltip){const tooltipRect=tooltip.getBoundingClientRect();const viewportWidth=window.innerWidth;const viewportHeight=window.innerHeight;let left=e.pageX+15;let top=e.pageY-15;// Adjust horizontal position if tooltip would go off-screen\nif(left+tooltipRect.width>viewportWidth-20){left=e.pageX-tooltipRect.width-15;}// Adjust vertical position if tooltip would go off-screen\nif(top+tooltipRect.height>viewportHeight-20){top=e.pageY-tooltipRect.height-15;}tooltip.style.left=left+'px';tooltip.style.top=top+'px';}});stateElement.addEventListener('mouseleave',()=>{if(tooltip){document.body.removeChild(tooltip);setTooltip(null);}});}},[tooltip]);const addStateClickHandler=useCallback(stateElement=>{const stateId=stateElement.id;stateElement.addEventListener('click',e=>{// Prevent tooltip from interfering with click\nif(tooltip){document.body.removeChild(tooltip);setTooltip(null);}// Clear any hover styles that might be persisting\nstateElement.style.strokeWidth='';stateElement.style.stroke='';// Call the parent component's click handler\nonStateClick(stateId);});},[tooltip,onStateClick]);const addLegendOverlay=useCallback(()=>{if(!svgContainerRef.current)return;const legendOverlay=document.createElement('div');legendOverlay.className='legend-overlay';legendOverlay.innerHTML=\"\\n      <div class=\\\"legend-item\\\">\\n        <div class=\\\"legend-color\\\" style=\\\"background: #28a745;\\\"></div>\\n        <span>Filing Required</span>\\n      </div>\\n      <div class=\\\"legend-item\\\">\\n        <div class=\\\"legend-color\\\" style=\\\"background: #6c757d;\\\"></div>\\n        <span>No Filing Required</span>\\n      </div>\\n      <div class=\\\"legend-item\\\">\\n        <div class=\\\"legend-color\\\" style=\\\"background: #ffc107;\\\"></div>\\n        <span>Conditional Filing</span>\\n      </div>\\n      <div class=\\\"legend-item\\\">\\n        <div class=\\\"legend-color\\\" style=\\\"background: #ffffff; border: 1px solid #333;\\\"></div>\\n        <span>Not Selected</span>\\n      </div>\\n    \";// Insert legend overlay at the beginning of the SVG container\nsvgContainerRef.current.insertBefore(legendOverlay,svgContainerRef.current.firstChild);},[]);const updateTextColors=useCallback(()=>{if(!svgContainerRef.current)return;const textElements=svgContainerRef.current.querySelectorAll('text[data-state-id]');textElements.forEach(textElement=>{const stateId=textElement.getAttribute('data-state-id');if(stateId&&stateId.length===2){const stateElement=svgContainerRef.current.querySelector(\"#\".concat(stateId));if(stateElement){let textColor='#000000';// Default to black\nif(stateElement.classList.contains('filing-required')||stateElement.style.fill==='#28a745'){textColor='#ffffff';// White for green\n}else if(stateElement.classList.contains('no-filing')||stateElement.style.fill==='#6c757d'){textColor='#ffffff';// White for grey\n}else if(stateElement.classList.contains('conditional-filing')||stateElement.style.fill==='#ffc107'){textColor='#000000';// Black for yellow\n}textElement.style.setProperty('fill',textColor,'important');textElement.setAttribute('fill',textColor);}}});},[]);const updateMap=useCallback(()=>{if(!svgContainerRef.current)return;// Reset all states to default light grey\nconst stateElements=svgContainerRef.current.querySelectorAll('.state');stateElements.forEach(stateElement=>{stateElement.classList.remove('filing-required','no-filing','conditional-filing');stateElement.style.setProperty('fill','#f0f0f0','important');});// Color selected states based on filing requirements\nselectedStates.forEach(stateAbbr=>{const stateElement=svgContainerRef.current.querySelector(\"#\".concat(stateAbbr));if(stateElement){const stateData=stateFilingData[stateAbbr];const filingStatus=stateData.forms[filingType];if(filingStatus==='required'){stateElement.classList.add('filing-required');stateElement.style.fill='#28a745';}else if(filingStatus==='conditional'){stateElement.classList.add('conditional-filing');stateElement.style.fill='#ffc107';}else if(filingStatus==='not-required'){stateElement.classList.add('no-filing');stateElement.style.fill='#6c757d';}}});// Update text colors\nupdateTextColors();},[selectedStates,filingType,updateTextColors]);const loadSVGMap=useCallback(async()=>{try{const response=await fetch('/us.svg');if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const svgContent=await response.text();if(svgContainerRef.current){svgContainerRef.current.innerHTML=svgContent;const svg=svgContainerRef.current.querySelector('svg');if(svg){svg.classList.add('usa-map');svg.setAttribute('viewBox','0 0 1200 700');svg.style.width='115%';svg.style.height='auto';svg.style.minHeight='920px';svg.style.margin='0 auto';// Add state classes and event listeners\nconst states=svg.querySelectorAll('path[id]');let labeledStates=0;let tooltipStates=0;states.forEach(state=>{// Remove any existing fill colors and styles from SVG\nstate.removeAttribute('style');state.removeAttribute('fill');// Set default styling\nstate.style.setProperty('fill','#f0f0f0','important');state.style.cursor='pointer';state.style.transition='fill 0.3s, stroke-width 0.3s';state.style.position='relative';// Add state class\nstate.classList.add('state','clickable');// Add state abbreviation labels\nif(addStateLabel(state)){labeledStates++;}// Add hover tooltip\naddStateTooltip(state);tooltipStates++;// Add click functionality\naddStateClickHandler(state);console.log(\"Initialized \".concat(state.id,\" with fill: \").concat(state.style.fill));});console.log(\"Loaded \".concat(states.length,\" states from SVG\"));console.log(\"Added labels to \".concat(labeledStates,\" states\"));console.log(\"Added tooltips to \".concat(tooltipStates,\" states\"));}// Add legend overlay\naddLegendOverlay();setSvgLoaded(true);}}catch(error){console.error('Error loading SVG:',error);if(svgContainerRef.current){svgContainerRef.current.innerHTML=\"\\n          <div style=\\\"text-align: center; padding: 30px; color: #721c24; background: #f8d7da; border: 1px solid #f5c6cb; border-radius: 8px; max-width: 600px; margin: 0 auto;\\\">\\n            <h4 style=\\\"margin-top: 0; color: #721c24;\\\">Error Loading Map</h4>\\n            <p style=\\\"margin-bottom: 20px;\\\">Unable to load the US map.</p>\\n            <p><strong>Error:</strong> \".concat(error.message,\"</p>\\n            <p>Please try refreshing the page or check the browser console for more details.</p>\\n          </div>\\n        \");}}},[addStateLabel,addStateTooltip,addStateClickHandler,addLegendOverlay]);useEffect(()=>{loadSVGMap();},[loadSVGMap]);useEffect(()=>{if(svgLoaded){updateMap();}},[svgLoaded,updateMap]);return/*#__PURE__*/_jsx(\"div\",{id:\"svgContainer\",ref:svgContainerRef});};export default USMap;","map":{"version":3,"names":["React","useEffect","useRef","useState","useCallback","stateFilingData","getConditionalText","jsx","_jsx","USMap","_ref","selectedStates","filingType","onStateClick","svgContainerRef","svgLoaded","setSvgLoaded","tooltip","setTooltip","addStateLabel","stateElement","stateId","id","isStateSuitableForText","bbox","getBBox","text","document","createElementNS","setAttribute","textContent","customPosition","getCustomStatePosition","x","y","parentNode","appendChild","bestPosition","findOptimalTextPosition","width","height","aspectRatio","area","akX","akY","finalAkX","Math","max","min","finalAkY","addStateTooltip","stateData","addEventListener","e","tooltipContent","concat","name","hasWarnings","warningsContent","cityReturns","type","cities","length","join","hasConditional","Object","values","forms","some","status","formTypes","key","forEach","form","statusClass","statusText","tooltipElement","createElement","className","innerHTML","style","position","left","pageX","top","pageY","background","color","padding","borderRadius","fontSize","zIndex","pointerEvents","boxShadow","border","minWidth","maxWidth","lineHeight","body","tooltipRect","getBoundingClientRect","viewportWidth","window","innerWidth","viewportHeight","innerHeight","removeChild","addStateClickHandler","strokeWidth","stroke","addLegendOverlay","current","legendOverlay","insertBefore","firstChild","updateTextColors","textElements","querySelectorAll","textElement","getAttribute","querySelector","textColor","classList","contains","fill","setProperty","updateMap","stateElements","remove","stateAbbr","filingStatus","add","loadSVGMap","response","fetch","ok","Error","svgContent","svg","minHeight","margin","states","labeledStates","tooltipStates","state","removeAttribute","cursor","transition","console","log","error","message","ref"],"sources":["/Users/arielkeren/Desktop/GitHub/TaxFiling/src/components/USMap.js"],"sourcesContent":["import React, { useEffect, useRef, useState, useCallback } from 'react';\nimport { stateFilingData } from '../data/stateFilingData';\nimport { getConditionalText } from '../data/stateFilingData';\n\nconst USMap = ({ selectedStates, filingType, onStateClick }) => {\n  const svgContainerRef = useRef(null);\n  const [svgLoaded, setSvgLoaded] = useState(false);\n  const [tooltip, setTooltip] = useState(null);\n\n  // Helper functions defined first\n  const addStateLabel = useCallback((stateElement) => {\n    const stateId = stateElement.id;\n    \n    if (stateId && stateFilingData[stateId]) {\n      // Check if state is suitable for text display\n      if (!isStateSuitableForText(stateElement)) {\n        return false;\n      }\n      \n      const bbox = stateElement.getBBox();\n      \n      // Create text element for state abbreviation\n      const text = document.createElementNS('http://www.w3.org/2000/svg', 'text');\n      text.setAttribute('text-anchor', 'middle');\n      text.setAttribute('dominant-baseline', 'middle');\n      text.setAttribute('font-size', '12');\n      text.setAttribute('font-weight', 'bold');\n      text.setAttribute('fill', '#000000');\n      text.setAttribute('data-state-id', stateId);\n      text.textContent = stateId;\n      \n      // Check for custom positioning for problematic states\n      const customPosition = getCustomStatePosition(stateId, bbox);\n      \n      if (customPosition) {\n        text.setAttribute('x', customPosition.x);\n        text.setAttribute('y', customPosition.y);\n        \n        // Add the text to the SVG\n        stateElement.parentNode.appendChild(text);\n        return true;\n      }\n      \n      // Find the best position for the text using the general algorithm\n      const bestPosition = findOptimalTextPosition(stateElement, bbox);\n      if (bestPosition) {\n        text.setAttribute('x', bestPosition.x);\n        text.setAttribute('y', bestPosition.y);\n        \n        // Add the text to the SVG\n        stateElement.parentNode.appendChild(text);\n        return true;\n      }\n    }\n    return false;\n  }, []);\n\n  const isStateSuitableForText = useCallback((stateElement) => {\n    const stateId = stateElement.id;\n    \n    // Explicitly exclude Hawaii, Maryland, and Massachusetts\n    if (stateId === 'HI' || stateId === 'MD' || stateId === 'MA') {\n      return false;\n    }\n    \n    const bbox = stateElement.getBBox();\n    \n    // Check if state is too small\n    if (bbox.width < 30 || bbox.height < 30) {\n      return false;\n    }\n    \n    // Check if state has reasonable aspect ratio\n    const aspectRatio = bbox.width / bbox.height;\n    if (aspectRatio < 0.3 || aspectRatio > 3.5) {\n      return false;\n    }\n    \n    // Check if the bounding box area is reasonable\n    const area = bbox.width * bbox.height;\n    if (area < 500) {\n      return false;\n    }\n    \n    return true;\n  }, []);\n\n  const findOptimalTextPosition = useCallback((stateElement, bbox) => {\n    // Check if state is too small for text\n    if (bbox.width < 28 || bbox.height < 20) {\n      return null;\n    }\n    \n    // Use bounding box center\n    return { \n      x: bbox.x + bbox.width / 2, \n      y: bbox.y + bbox.height / 2 \n    };\n  }, []);\n\n  const getCustomStatePosition = useCallback((stateId, bbox) => {\n    // Custom positioning for specific problematic states\n    switch (stateId) {\n      case 'FL':\n        return {\n          x: bbox.x + bbox.width * 0.78,\n          y: bbox.y + bbox.height * 0.45\n        };\n      case 'LA':\n        return {\n          x: bbox.x + bbox.width * 0.35,\n          y: bbox.y + bbox.height * 0.6\n        };\n      case 'WV':\n        return {\n          x: bbox.x + bbox.width * 0.45,\n          y: bbox.y + bbox.height * 0.55\n        };\n      case 'MD':\n      case 'MA':\n        return null; // Don't show labels for these states\n      case 'MI':\n        return {\n          x: bbox.x + bbox.width * 0.7,\n          y: bbox.y + bbox.height * 0.7\n        };\n      case 'MN':\n        return {\n          x: bbox.x + bbox.width * 0.45,\n          y: bbox.y + bbox.height * 0.6\n        };\n      case 'KY':\n        return {\n          x: bbox.x + bbox.width * 0.55,\n          y: bbox.y + bbox.height * 0.5\n        };\n      case 'CA':\n        return {\n          x: bbox.x + bbox.width * 0.5,\n          y: bbox.y + bbox.height * 0.6\n        };\n      case 'WA':\n        return {\n          x: bbox.x + bbox.width * 0.6,\n          y: bbox.y + bbox.height * 0.5\n        };\n      case 'ID':\n        return {\n          x: bbox.x + bbox.width * 0.5,\n          y: bbox.y + bbox.height * 0.7\n        };\n      case 'WI':\n        return {\n          x: bbox.x + bbox.width * 0.5,\n          y: bbox.y + bbox.height * 0.55\n        };\n      case 'TN':\n        return {\n          x: bbox.x + bbox.width * 0.5,\n          y: bbox.y + bbox.height * 0.55\n        };\n      case 'AK':\n        const akX = bbox.x + bbox.width * 0.7;\n        const akY = bbox.y + bbox.height * 0.44;\n        const finalAkX = Math.max(bbox.x + 30, Math.min(akX, bbox.x + bbox.width - 30));\n        const finalAkY = Math.max(bbox.y + 30, Math.min(akY, bbox.y + bbox.height - 30));\n        return { x: finalAkX, y: finalAkY };\n      case 'HI':\n        return null; // Don't show label for Hawaii\n      default:\n        return null; // Use general algorithm for other states\n    }\n  }, []);\n\n  const addStateTooltip = useCallback((stateElement) => {\n    const stateId = stateElement.id;\n    if (stateId && stateFilingData[stateId]) {\n      const stateData = stateFilingData[stateId];\n      \n      stateElement.addEventListener('mouseenter', (e) => {\n        // Create comprehensive tooltip content\n        let tooltipContent = `<div class=\"tooltip-header\">${stateData.name} (${stateId})</div>`;\n        \n        // Add warnings and advisories\n        let hasWarnings = false;\n        let warningsContent = '';\n        \n        if (stateData.cityReturns) {\n          hasWarnings = true;\n          if (stateData.cityReturns.type === 'all') {\n            warningsContent += `\n              <div class=\"city-returns-warning\" style=\"margin: 0; font-size: 11px;\">\n                <strong>⚠️ All Cities Must File</strong>\n              </div>\n            `;\n          } else if (stateData.cityReturns.type === 'specific' && stateData.cityReturns.cities.length > 0) {\n            warningsContent += `\n              <div class=\"city-returns-advisory\" style=\"margin: 0; font-size: 11px;\">\n                <strong>ℹ️ City Returns: ${stateData.cityReturns.cities.join(', ')}</strong>\n              </div>\n            `;\n          }\n        }\n        \n        // Add conditional filing note if applicable\n        const hasConditional = Object.values(stateData.forms).some(status => status === 'conditional');\n        if (hasConditional) {\n          hasWarnings = true;\n          if (warningsContent) {\n            warningsContent = `\n              <div style=\"display: flex; gap: 10px; margin-bottom: 20px;\">\n                <div style=\"flex: 1;\">${warningsContent}</div>\n                <div style=\"flex: 1;\">\n                  <div class=\"tooltip-note\" style=\"margin: 0; font-size: 11px;\">\n                    <strong>Conditional: ${getConditionalText(stateId)}</strong>\n                  </div>\n                </div>\n              </div>\n            `;\n          } else {\n            warningsContent = `\n              <div class=\"tooltip-note\" style=\"margin: 0 0 20px 0; font-size: 11px;\">\n                <strong>Conditional: ${getConditionalText(stateId)}</strong>\n              </div>\n            `;\n          }\n        } else if (warningsContent) {\n          warningsContent = `<div style=\"margin-bottom: 20px;\">${warningsContent}</div>`;\n        }\n        \n        if (hasWarnings) {\n          tooltipContent += warningsContent;\n        }\n        \n        // Add filing requirements with status indicators\n        const formTypes = [\n          { key: '1120S', name: 'S Corporation (1120S)' },\n          { key: '1065', name: 'Partnership (1065)' },\n          { key: '1120', name: 'C Corporation (1120)' },\n          { key: '1040', name: 'Individual (1040)' }\n        ];\n        \n        formTypes.forEach(form => {\n          const status = stateData.forms[form.key];\n          const statusClass = status === 'required' ? 'status-required' : \n                            status === 'conditional' ? 'status-conditional' : 'status-not-required';\n          const statusText = status === 'required' ? 'Required' : \n                           status === 'conditional' ? 'Conditional' : 'Not Required';\n          \n          tooltipContent += `\n            <div class=\"tooltip-row\">\n              <span class=\"form-name\">${form.name}:</span>\n              <span class=\"status ${statusClass}\">${statusText}</span>\n            </div>\n          `;\n        });\n        \n        // Create tooltip element\n        const tooltipElement = document.createElement('div');\n        tooltipElement.className = 'state-tooltip';\n        tooltipElement.innerHTML = tooltipContent;\n        tooltipElement.style.position = 'absolute';\n        tooltipElement.style.left = e.pageX + 15 + 'px';\n        tooltipElement.style.top = e.pageY - 15 + 'px';\n        tooltipElement.style.background = 'white';\n        tooltipElement.style.color = '#495057';\n        tooltipElement.style.padding = '25px';\n        tooltipElement.style.borderRadius = '12px';\n        tooltipElement.style.fontSize = '14px';\n        tooltipElement.style.zIndex = '1000';\n        tooltipElement.style.pointerEvents = 'none';\n        tooltipElement.style.boxShadow = '0 8px 32px rgba(0,0,0,0.15)';\n        tooltipElement.style.border = '1px solid #e9ecef';\n        tooltipElement.style.minWidth = '400px';\n        tooltipElement.style.maxWidth = '450px';\n        tooltipElement.style.lineHeight = '1.6';\n        \n        document.body.appendChild(tooltipElement);\n        setTooltip(tooltipElement);\n      });\n      \n      stateElement.addEventListener('mousemove', (e) => {\n        if (tooltip) {\n          const tooltipRect = tooltip.getBoundingClientRect();\n          const viewportWidth = window.innerWidth;\n          const viewportHeight = window.innerHeight;\n          \n          let left = e.pageX + 15;\n          let top = e.pageY - 15;\n          \n          // Adjust horizontal position if tooltip would go off-screen\n          if (left + tooltipRect.width > viewportWidth - 20) {\n            left = e.pageX - tooltipRect.width - 15;\n          }\n          \n          // Adjust vertical position if tooltip would go off-screen\n          if (top + tooltipRect.height > viewportHeight - 20) {\n            top = e.pageY - tooltipRect.height - 15;\n          }\n          \n          tooltip.style.left = left + 'px';\n          tooltip.style.top = top + 'px';\n        }\n      });\n      \n      stateElement.addEventListener('mouseleave', () => {\n        if (tooltip) {\n          document.body.removeChild(tooltip);\n          setTooltip(null);\n        }\n      });\n    }\n  }, [tooltip]);\n\n  const addStateClickHandler = useCallback((stateElement) => {\n    const stateId = stateElement.id;\n    \n    stateElement.addEventListener('click', (e) => {\n      // Prevent tooltip from interfering with click\n      if (tooltip) {\n        document.body.removeChild(tooltip);\n        setTooltip(null);\n      }\n      \n      // Clear any hover styles that might be persisting\n      stateElement.style.strokeWidth = '';\n      stateElement.style.stroke = '';\n      \n      // Call the parent component's click handler\n      onStateClick(stateId);\n    });\n  }, [tooltip, onStateClick]);\n\n  const addLegendOverlay = useCallback(() => {\n    if (!svgContainerRef.current) return;\n    \n    const legendOverlay = document.createElement('div');\n    legendOverlay.className = 'legend-overlay';\n    legendOverlay.innerHTML = `\n      <div class=\"legend-item\">\n        <div class=\"legend-color\" style=\"background: #28a745;\"></div>\n        <span>Filing Required</span>\n      </div>\n      <div class=\"legend-item\">\n        <div class=\"legend-color\" style=\"background: #6c757d;\"></div>\n        <span>No Filing Required</span>\n      </div>\n      <div class=\"legend-item\">\n        <div class=\"legend-color\" style=\"background: #ffc107;\"></div>\n        <span>Conditional Filing</span>\n      </div>\n      <div class=\"legend-item\">\n        <div class=\"legend-color\" style=\"background: #ffffff; border: 1px solid #333;\"></div>\n        <span>Not Selected</span>\n      </div>\n    `;\n    \n    // Insert legend overlay at the beginning of the SVG container\n    svgContainerRef.current.insertBefore(legendOverlay, svgContainerRef.current.firstChild);\n  }, []);\n\n  const updateTextColors = useCallback(() => {\n    if (!svgContainerRef.current) return;\n    \n    const textElements = svgContainerRef.current.querySelectorAll('text[data-state-id]');\n    \n    textElements.forEach(textElement => {\n      const stateId = textElement.getAttribute('data-state-id');\n      if (stateId && stateId.length === 2) {\n        const stateElement = svgContainerRef.current.querySelector(`#${stateId}`);\n        \n        if (stateElement) {\n          let textColor = '#000000'; // Default to black\n          \n          if (stateElement.classList.contains('filing-required') || stateElement.style.fill === '#28a745') {\n            textColor = '#ffffff'; // White for green\n          } else if (stateElement.classList.contains('no-filing') || stateElement.style.fill === '#6c757d') {\n            textColor = '#ffffff'; // White for grey\n          } else if (stateElement.classList.contains('conditional-filing') || stateElement.style.fill === '#ffc107') {\n            textColor = '#000000'; // Black for yellow\n          }\n          \n          textElement.style.setProperty('fill', textColor, 'important');\n          textElement.setAttribute('fill', textColor);\n        }\n      }\n    });\n  }, []);\n\n  const updateMap = useCallback(() => {\n    if (!svgContainerRef.current) return;\n    \n    // Reset all states to default light grey\n    const stateElements = svgContainerRef.current.querySelectorAll('.state');\n    stateElements.forEach(stateElement => {\n      stateElement.classList.remove('filing-required', 'no-filing', 'conditional-filing');\n      stateElement.style.setProperty('fill', '#f0f0f0', 'important');\n    });\n    \n    // Color selected states based on filing requirements\n    selectedStates.forEach(stateAbbr => {\n      const stateElement = svgContainerRef.current.querySelector(`#${stateAbbr}`);\n      if (stateElement) {\n        const stateData = stateFilingData[stateAbbr];\n        const filingStatus = stateData.forms[filingType];\n        \n        if (filingStatus === 'required') {\n          stateElement.classList.add('filing-required');\n          stateElement.style.fill = '#28a745';\n        } else if (filingStatus === 'conditional') {\n          stateElement.classList.add('conditional-filing');\n          stateElement.style.fill = '#ffc107';\n        } else if (filingStatus === 'not-required') {\n          stateElement.classList.add('no-filing');\n          stateElement.style.fill = '#6c757d';\n        }\n      }\n    });\n    \n    // Update text colors\n    updateTextColors();\n  }, [selectedStates, filingType, updateTextColors]);\n\n  const loadSVGMap = useCallback(async () => {\n    try {\n      const response = await fetch('/us.svg');\n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`);\n      }\n      const svgContent = await response.text();\n      \n      if (svgContainerRef.current) {\n        svgContainerRef.current.innerHTML = svgContent;\n        \n        const svg = svgContainerRef.current.querySelector('svg');\n        if (svg) {\n          svg.classList.add('usa-map');\n          svg.setAttribute('viewBox', '0 0 1200 700');\n          svg.style.width = '115%';\n          svg.style.height = 'auto';\n          svg.style.minHeight = '920px';\n          svg.style.margin = '0 auto';\n          \n          // Add state classes and event listeners\n          const states = svg.querySelectorAll('path[id]');\n          let labeledStates = 0;\n          let tooltipStates = 0;\n          \n          states.forEach(state => {\n            // Remove any existing fill colors and styles from SVG\n            state.removeAttribute('style');\n            state.removeAttribute('fill');\n            \n            // Set default styling\n            state.style.setProperty('fill', '#f0f0f0', 'important');\n            state.style.cursor = 'pointer';\n            state.style.transition = 'fill 0.3s, stroke-width 0.3s';\n            state.style.position = 'relative';\n            \n            // Add state class\n            state.classList.add('state', 'clickable');\n            \n            // Add state abbreviation labels\n            if (addStateLabel(state)) {\n              labeledStates++;\n            }\n            \n            // Add hover tooltip\n            addStateTooltip(state);\n            tooltipStates++;\n            \n            // Add click functionality\n            addStateClickHandler(state);\n            \n            console.log(`Initialized ${state.id} with fill: ${state.style.fill}`);\n          });\n          \n          console.log(`Loaded ${states.length} states from SVG`);\n          console.log(`Added labels to ${labeledStates} states`);\n          console.log(`Added tooltips to ${tooltipStates} states`);\n        }\n        \n        // Add legend overlay\n        addLegendOverlay();\n        \n        setSvgLoaded(true);\n      }\n    } catch (error) {\n      console.error('Error loading SVG:', error);\n      if (svgContainerRef.current) {\n        svgContainerRef.current.innerHTML = `\n          <div style=\"text-align: center; padding: 30px; color: #721c24; background: #f8d7da; border: 1px solid #f5c6cb; border-radius: 8px; max-width: 600px; margin: 0 auto;\">\n            <h4 style=\"margin-top: 0; color: #721c24;\">Error Loading Map</h4>\n            <p style=\"margin-bottom: 20px;\">Unable to load the US map.</p>\n            <p><strong>Error:</strong> ${error.message}</p>\n            <p>Please try refreshing the page or check the browser console for more details.</p>\n          </div>\n        `;\n      }\n    }\n  }, [addStateLabel, addStateTooltip, addStateClickHandler, addLegendOverlay]);\n\n  useEffect(() => {\n    loadSVGMap();\n  }, [loadSVGMap]);\n\n  useEffect(() => {\n    if (svgLoaded) {\n      updateMap();\n    }\n  }, [svgLoaded, updateMap]);\n\n  return (\n    <div id=\"svgContainer\" ref={svgContainerRef}>\n      {/* SVG will be loaded here */}\n    </div>\n  );\n};\n\nexport default USMap; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,MAAM,CAAEC,QAAQ,CAAEC,WAAW,KAAQ,OAAO,CACvE,OAASC,eAAe,KAAQ,yBAAyB,CACzD,OAASC,kBAAkB,KAAQ,yBAAyB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE7D,KAAM,CAAAC,KAAK,CAAGC,IAAA,EAAkD,IAAjD,CAAEC,cAAc,CAAEC,UAAU,CAAEC,YAAa,CAAC,CAAAH,IAAA,CACzD,KAAM,CAAAI,eAAe,CAAGZ,MAAM,CAAC,IAAI,CAAC,CACpC,KAAM,CAACa,SAAS,CAAEC,YAAY,CAAC,CAAGb,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACc,OAAO,CAAEC,UAAU,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CAE5C;AACA,KAAM,CAAAgB,aAAa,CAAGf,WAAW,CAAEgB,YAAY,EAAK,CAClD,KAAM,CAAAC,OAAO,CAAGD,YAAY,CAACE,EAAE,CAE/B,GAAID,OAAO,EAAIhB,eAAe,CAACgB,OAAO,CAAC,CAAE,CACvC;AACA,GAAI,CAACE,sBAAsB,CAACH,YAAY,CAAC,CAAE,CACzC,MAAO,MAAK,CACd,CAEA,KAAM,CAAAI,IAAI,CAAGJ,YAAY,CAACK,OAAO,CAAC,CAAC,CAEnC;AACA,KAAM,CAAAC,IAAI,CAAGC,QAAQ,CAACC,eAAe,CAAC,4BAA4B,CAAE,MAAM,CAAC,CAC3EF,IAAI,CAACG,YAAY,CAAC,aAAa,CAAE,QAAQ,CAAC,CAC1CH,IAAI,CAACG,YAAY,CAAC,mBAAmB,CAAE,QAAQ,CAAC,CAChDH,IAAI,CAACG,YAAY,CAAC,WAAW,CAAE,IAAI,CAAC,CACpCH,IAAI,CAACG,YAAY,CAAC,aAAa,CAAE,MAAM,CAAC,CACxCH,IAAI,CAACG,YAAY,CAAC,MAAM,CAAE,SAAS,CAAC,CACpCH,IAAI,CAACG,YAAY,CAAC,eAAe,CAAER,OAAO,CAAC,CAC3CK,IAAI,CAACI,WAAW,CAAGT,OAAO,CAE1B;AACA,KAAM,CAAAU,cAAc,CAAGC,sBAAsB,CAACX,OAAO,CAAEG,IAAI,CAAC,CAE5D,GAAIO,cAAc,CAAE,CAClBL,IAAI,CAACG,YAAY,CAAC,GAAG,CAAEE,cAAc,CAACE,CAAC,CAAC,CACxCP,IAAI,CAACG,YAAY,CAAC,GAAG,CAAEE,cAAc,CAACG,CAAC,CAAC,CAExC;AACAd,YAAY,CAACe,UAAU,CAACC,WAAW,CAACV,IAAI,CAAC,CACzC,MAAO,KAAI,CACb,CAEA;AACA,KAAM,CAAAW,YAAY,CAAGC,uBAAuB,CAAClB,YAAY,CAAEI,IAAI,CAAC,CAChE,GAAIa,YAAY,CAAE,CAChBX,IAAI,CAACG,YAAY,CAAC,GAAG,CAAEQ,YAAY,CAACJ,CAAC,CAAC,CACtCP,IAAI,CAACG,YAAY,CAAC,GAAG,CAAEQ,YAAY,CAACH,CAAC,CAAC,CAEtC;AACAd,YAAY,CAACe,UAAU,CAACC,WAAW,CAACV,IAAI,CAAC,CACzC,MAAO,KAAI,CACb,CACF,CACA,MAAO,MAAK,CACd,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAH,sBAAsB,CAAGnB,WAAW,CAAEgB,YAAY,EAAK,CAC3D,KAAM,CAAAC,OAAO,CAAGD,YAAY,CAACE,EAAE,CAE/B;AACA,GAAID,OAAO,GAAK,IAAI,EAAIA,OAAO,GAAK,IAAI,EAAIA,OAAO,GAAK,IAAI,CAAE,CAC5D,MAAO,MAAK,CACd,CAEA,KAAM,CAAAG,IAAI,CAAGJ,YAAY,CAACK,OAAO,CAAC,CAAC,CAEnC;AACA,GAAID,IAAI,CAACe,KAAK,CAAG,EAAE,EAAIf,IAAI,CAACgB,MAAM,CAAG,EAAE,CAAE,CACvC,MAAO,MAAK,CACd,CAEA;AACA,KAAM,CAAAC,WAAW,CAAGjB,IAAI,CAACe,KAAK,CAAGf,IAAI,CAACgB,MAAM,CAC5C,GAAIC,WAAW,CAAG,GAAG,EAAIA,WAAW,CAAG,GAAG,CAAE,CAC1C,MAAO,MAAK,CACd,CAEA;AACA,KAAM,CAAAC,IAAI,CAAGlB,IAAI,CAACe,KAAK,CAAGf,IAAI,CAACgB,MAAM,CACrC,GAAIE,IAAI,CAAG,GAAG,CAAE,CACd,MAAO,MAAK,CACd,CAEA,MAAO,KAAI,CACb,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAJ,uBAAuB,CAAGlC,WAAW,CAAC,CAACgB,YAAY,CAAEI,IAAI,GAAK,CAClE;AACA,GAAIA,IAAI,CAACe,KAAK,CAAG,EAAE,EAAIf,IAAI,CAACgB,MAAM,CAAG,EAAE,CAAE,CACvC,MAAO,KAAI,CACb,CAEA;AACA,MAAO,CACLP,CAAC,CAAET,IAAI,CAACS,CAAC,CAAGT,IAAI,CAACe,KAAK,CAAG,CAAC,CAC1BL,CAAC,CAAEV,IAAI,CAACU,CAAC,CAAGV,IAAI,CAACgB,MAAM,CAAG,CAC5B,CAAC,CACH,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAR,sBAAsB,CAAG5B,WAAW,CAAC,CAACiB,OAAO,CAAEG,IAAI,GAAK,CAC5D;AACA,OAAQH,OAAO,EACb,IAAK,IAAI,CACP,MAAO,CACLY,CAAC,CAAET,IAAI,CAACS,CAAC,CAAGT,IAAI,CAACe,KAAK,CAAG,IAAI,CAC7BL,CAAC,CAAEV,IAAI,CAACU,CAAC,CAAGV,IAAI,CAACgB,MAAM,CAAG,IAC5B,CAAC,CACH,IAAK,IAAI,CACP,MAAO,CACLP,CAAC,CAAET,IAAI,CAACS,CAAC,CAAGT,IAAI,CAACe,KAAK,CAAG,IAAI,CAC7BL,CAAC,CAAEV,IAAI,CAACU,CAAC,CAAGV,IAAI,CAACgB,MAAM,CAAG,GAC5B,CAAC,CACH,IAAK,IAAI,CACP,MAAO,CACLP,CAAC,CAAET,IAAI,CAACS,CAAC,CAAGT,IAAI,CAACe,KAAK,CAAG,IAAI,CAC7BL,CAAC,CAAEV,IAAI,CAACU,CAAC,CAAGV,IAAI,CAACgB,MAAM,CAAG,IAC5B,CAAC,CACH,IAAK,IAAI,CACT,IAAK,IAAI,CACP,MAAO,KAAI,CAAE;AACf,IAAK,IAAI,CACP,MAAO,CACLP,CAAC,CAAET,IAAI,CAACS,CAAC,CAAGT,IAAI,CAACe,KAAK,CAAG,GAAG,CAC5BL,CAAC,CAAEV,IAAI,CAACU,CAAC,CAAGV,IAAI,CAACgB,MAAM,CAAG,GAC5B,CAAC,CACH,IAAK,IAAI,CACP,MAAO,CACLP,CAAC,CAAET,IAAI,CAACS,CAAC,CAAGT,IAAI,CAACe,KAAK,CAAG,IAAI,CAC7BL,CAAC,CAAEV,IAAI,CAACU,CAAC,CAAGV,IAAI,CAACgB,MAAM,CAAG,GAC5B,CAAC,CACH,IAAK,IAAI,CACP,MAAO,CACLP,CAAC,CAAET,IAAI,CAACS,CAAC,CAAGT,IAAI,CAACe,KAAK,CAAG,IAAI,CAC7BL,CAAC,CAAEV,IAAI,CAACU,CAAC,CAAGV,IAAI,CAACgB,MAAM,CAAG,GAC5B,CAAC,CACH,IAAK,IAAI,CACP,MAAO,CACLP,CAAC,CAAET,IAAI,CAACS,CAAC,CAAGT,IAAI,CAACe,KAAK,CAAG,GAAG,CAC5BL,CAAC,CAAEV,IAAI,CAACU,CAAC,CAAGV,IAAI,CAACgB,MAAM,CAAG,GAC5B,CAAC,CACH,IAAK,IAAI,CACP,MAAO,CACLP,CAAC,CAAET,IAAI,CAACS,CAAC,CAAGT,IAAI,CAACe,KAAK,CAAG,GAAG,CAC5BL,CAAC,CAAEV,IAAI,CAACU,CAAC,CAAGV,IAAI,CAACgB,MAAM,CAAG,GAC5B,CAAC,CACH,IAAK,IAAI,CACP,MAAO,CACLP,CAAC,CAAET,IAAI,CAACS,CAAC,CAAGT,IAAI,CAACe,KAAK,CAAG,GAAG,CAC5BL,CAAC,CAAEV,IAAI,CAACU,CAAC,CAAGV,IAAI,CAACgB,MAAM,CAAG,GAC5B,CAAC,CACH,IAAK,IAAI,CACP,MAAO,CACLP,CAAC,CAAET,IAAI,CAACS,CAAC,CAAGT,IAAI,CAACe,KAAK,CAAG,GAAG,CAC5BL,CAAC,CAAEV,IAAI,CAACU,CAAC,CAAGV,IAAI,CAACgB,MAAM,CAAG,IAC5B,CAAC,CACH,IAAK,IAAI,CACP,MAAO,CACLP,CAAC,CAAET,IAAI,CAACS,CAAC,CAAGT,IAAI,CAACe,KAAK,CAAG,GAAG,CAC5BL,CAAC,CAAEV,IAAI,CAACU,CAAC,CAAGV,IAAI,CAACgB,MAAM,CAAG,IAC5B,CAAC,CACH,IAAK,IAAI,CACP,KAAM,CAAAG,GAAG,CAAGnB,IAAI,CAACS,CAAC,CAAGT,IAAI,CAACe,KAAK,CAAG,GAAG,CACrC,KAAM,CAAAK,GAAG,CAAGpB,IAAI,CAACU,CAAC,CAAGV,IAAI,CAACgB,MAAM,CAAG,IAAI,CACvC,KAAM,CAAAK,QAAQ,CAAGC,IAAI,CAACC,GAAG,CAACvB,IAAI,CAACS,CAAC,CAAG,EAAE,CAAEa,IAAI,CAACE,GAAG,CAACL,GAAG,CAAEnB,IAAI,CAACS,CAAC,CAAGT,IAAI,CAACe,KAAK,CAAG,EAAE,CAAC,CAAC,CAC/E,KAAM,CAAAU,QAAQ,CAAGH,IAAI,CAACC,GAAG,CAACvB,IAAI,CAACU,CAAC,CAAG,EAAE,CAAEY,IAAI,CAACE,GAAG,CAACJ,GAAG,CAAEpB,IAAI,CAACU,CAAC,CAAGV,IAAI,CAACgB,MAAM,CAAG,EAAE,CAAC,CAAC,CAChF,MAAO,CAAEP,CAAC,CAAEY,QAAQ,CAAEX,CAAC,CAAEe,QAAS,CAAC,CACrC,IAAK,IAAI,CACP,MAAO,KAAI,CAAE;AACf,QACE,MAAO,KAAI,CAAE;AACjB,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,eAAe,CAAG9C,WAAW,CAAEgB,YAAY,EAAK,CACpD,KAAM,CAAAC,OAAO,CAAGD,YAAY,CAACE,EAAE,CAC/B,GAAID,OAAO,EAAIhB,eAAe,CAACgB,OAAO,CAAC,CAAE,CACvC,KAAM,CAAA8B,SAAS,CAAG9C,eAAe,CAACgB,OAAO,CAAC,CAE1CD,YAAY,CAACgC,gBAAgB,CAAC,YAAY,CAAGC,CAAC,EAAK,CACjD;AACA,GAAI,CAAAC,cAAc,kCAAAC,MAAA,CAAkCJ,SAAS,CAACK,IAAI,OAAAD,MAAA,CAAKlC,OAAO,WAAS,CAEvF;AACA,GAAI,CAAAoC,WAAW,CAAG,KAAK,CACvB,GAAI,CAAAC,eAAe,CAAG,EAAE,CAExB,GAAIP,SAAS,CAACQ,WAAW,CAAE,CACzBF,WAAW,CAAG,IAAI,CAClB,GAAIN,SAAS,CAACQ,WAAW,CAACC,IAAI,GAAK,KAAK,CAAE,CACxCF,eAAe,sMAId,CACH,CAAC,IAAM,IAAIP,SAAS,CAACQ,WAAW,CAACC,IAAI,GAAK,UAAU,EAAIT,SAAS,CAACQ,WAAW,CAACE,MAAM,CAACC,MAAM,CAAG,CAAC,CAAE,CAC/FJ,eAAe,qJAAAH,MAAA,CAEgBJ,SAAS,CAACQ,WAAW,CAACE,MAAM,CAACE,IAAI,CAAC,IAAI,CAAC,iDAErE,CACH,CACF,CAEA;AACA,KAAM,CAAAC,cAAc,CAAGC,MAAM,CAACC,MAAM,CAACf,SAAS,CAACgB,KAAK,CAAC,CAACC,IAAI,CAACC,MAAM,EAAIA,MAAM,GAAK,aAAa,CAAC,CAC9F,GAAIL,cAAc,CAAE,CAClBP,WAAW,CAAG,IAAI,CAClB,GAAIC,eAAe,CAAE,CACnBA,eAAe,4HAAAH,MAAA,CAEaG,eAAe,sLAAAH,MAAA,CAGZjD,kBAAkB,CAACe,OAAO,CAAC,mGAIzD,CACH,CAAC,IAAM,CACLqC,eAAe,sIAAAH,MAAA,CAEYjD,kBAAkB,CAACe,OAAO,CAAC,iDAErD,CACH,CACF,CAAC,IAAM,IAAIqC,eAAe,CAAE,CAC1BA,eAAe,wCAAAH,MAAA,CAAwCG,eAAe,UAAQ,CAChF,CAEA,GAAID,WAAW,CAAE,CACfH,cAAc,EAAII,eAAe,CACnC,CAEA;AACA,KAAM,CAAAY,SAAS,CAAG,CAChB,CAAEC,GAAG,CAAE,OAAO,CAAEf,IAAI,CAAE,uBAAwB,CAAC,CAC/C,CAAEe,GAAG,CAAE,MAAM,CAAEf,IAAI,CAAE,oBAAqB,CAAC,CAC3C,CAAEe,GAAG,CAAE,MAAM,CAAEf,IAAI,CAAE,sBAAuB,CAAC,CAC7C,CAAEe,GAAG,CAAE,MAAM,CAAEf,IAAI,CAAE,mBAAoB,CAAC,CAC3C,CAEDc,SAAS,CAACE,OAAO,CAACC,IAAI,EAAI,CACxB,KAAM,CAAAJ,MAAM,CAAGlB,SAAS,CAACgB,KAAK,CAACM,IAAI,CAACF,GAAG,CAAC,CACxC,KAAM,CAAAG,WAAW,CAAGL,MAAM,GAAK,UAAU,CAAG,iBAAiB,CAC3CA,MAAM,GAAK,aAAa,CAAG,oBAAoB,CAAG,qBAAqB,CACzF,KAAM,CAAAM,UAAU,CAAGN,MAAM,GAAK,UAAU,CAAG,UAAU,CACpCA,MAAM,GAAK,aAAa,CAAG,aAAa,CAAG,cAAc,CAE1Ef,cAAc,wFAAAC,MAAA,CAEgBkB,IAAI,CAACjB,IAAI,kDAAAD,MAAA,CACbmB,WAAW,QAAAnB,MAAA,CAAKoB,UAAU,2CAEnD,CACH,CAAC,CAAC,CAEF;AACA,KAAM,CAAAC,cAAc,CAAGjD,QAAQ,CAACkD,aAAa,CAAC,KAAK,CAAC,CACpDD,cAAc,CAACE,SAAS,CAAG,eAAe,CAC1CF,cAAc,CAACG,SAAS,CAAGzB,cAAc,CACzCsB,cAAc,CAACI,KAAK,CAACC,QAAQ,CAAG,UAAU,CAC1CL,cAAc,CAACI,KAAK,CAACE,IAAI,CAAG7B,CAAC,CAAC8B,KAAK,CAAG,EAAE,CAAG,IAAI,CAC/CP,cAAc,CAACI,KAAK,CAACI,GAAG,CAAG/B,CAAC,CAACgC,KAAK,CAAG,EAAE,CAAG,IAAI,CAC9CT,cAAc,CAACI,KAAK,CAACM,UAAU,CAAG,OAAO,CACzCV,cAAc,CAACI,KAAK,CAACO,KAAK,CAAG,SAAS,CACtCX,cAAc,CAACI,KAAK,CAACQ,OAAO,CAAG,MAAM,CACrCZ,cAAc,CAACI,KAAK,CAACS,YAAY,CAAG,MAAM,CAC1Cb,cAAc,CAACI,KAAK,CAACU,QAAQ,CAAG,MAAM,CACtCd,cAAc,CAACI,KAAK,CAACW,MAAM,CAAG,MAAM,CACpCf,cAAc,CAACI,KAAK,CAACY,aAAa,CAAG,MAAM,CAC3ChB,cAAc,CAACI,KAAK,CAACa,SAAS,CAAG,6BAA6B,CAC9DjB,cAAc,CAACI,KAAK,CAACc,MAAM,CAAG,mBAAmB,CACjDlB,cAAc,CAACI,KAAK,CAACe,QAAQ,CAAG,OAAO,CACvCnB,cAAc,CAACI,KAAK,CAACgB,QAAQ,CAAG,OAAO,CACvCpB,cAAc,CAACI,KAAK,CAACiB,UAAU,CAAG,KAAK,CAEvCtE,QAAQ,CAACuE,IAAI,CAAC9D,WAAW,CAACwC,cAAc,CAAC,CACzC1D,UAAU,CAAC0D,cAAc,CAAC,CAC5B,CAAC,CAAC,CAEFxD,YAAY,CAACgC,gBAAgB,CAAC,WAAW,CAAGC,CAAC,EAAK,CAChD,GAAIpC,OAAO,CAAE,CACX,KAAM,CAAAkF,WAAW,CAAGlF,OAAO,CAACmF,qBAAqB,CAAC,CAAC,CACnD,KAAM,CAAAC,aAAa,CAAGC,MAAM,CAACC,UAAU,CACvC,KAAM,CAAAC,cAAc,CAAGF,MAAM,CAACG,WAAW,CAEzC,GAAI,CAAAvB,IAAI,CAAG7B,CAAC,CAAC8B,KAAK,CAAG,EAAE,CACvB,GAAI,CAAAC,GAAG,CAAG/B,CAAC,CAACgC,KAAK,CAAG,EAAE,CAEtB;AACA,GAAIH,IAAI,CAAGiB,WAAW,CAAC5D,KAAK,CAAG8D,aAAa,CAAG,EAAE,CAAE,CACjDnB,IAAI,CAAG7B,CAAC,CAAC8B,KAAK,CAAGgB,WAAW,CAAC5D,KAAK,CAAG,EAAE,CACzC,CAEA;AACA,GAAI6C,GAAG,CAAGe,WAAW,CAAC3D,MAAM,CAAGgE,cAAc,CAAG,EAAE,CAAE,CAClDpB,GAAG,CAAG/B,CAAC,CAACgC,KAAK,CAAGc,WAAW,CAAC3D,MAAM,CAAG,EAAE,CACzC,CAEAvB,OAAO,CAAC+D,KAAK,CAACE,IAAI,CAAGA,IAAI,CAAG,IAAI,CAChCjE,OAAO,CAAC+D,KAAK,CAACI,GAAG,CAAGA,GAAG,CAAG,IAAI,CAChC,CACF,CAAC,CAAC,CAEFhE,YAAY,CAACgC,gBAAgB,CAAC,YAAY,CAAE,IAAM,CAChD,GAAInC,OAAO,CAAE,CACXU,QAAQ,CAACuE,IAAI,CAACQ,WAAW,CAACzF,OAAO,CAAC,CAClCC,UAAU,CAAC,IAAI,CAAC,CAClB,CACF,CAAC,CAAC,CACJ,CACF,CAAC,CAAE,CAACD,OAAO,CAAC,CAAC,CAEb,KAAM,CAAA0F,oBAAoB,CAAGvG,WAAW,CAAEgB,YAAY,EAAK,CACzD,KAAM,CAAAC,OAAO,CAAGD,YAAY,CAACE,EAAE,CAE/BF,YAAY,CAACgC,gBAAgB,CAAC,OAAO,CAAGC,CAAC,EAAK,CAC5C;AACA,GAAIpC,OAAO,CAAE,CACXU,QAAQ,CAACuE,IAAI,CAACQ,WAAW,CAACzF,OAAO,CAAC,CAClCC,UAAU,CAAC,IAAI,CAAC,CAClB,CAEA;AACAE,YAAY,CAAC4D,KAAK,CAAC4B,WAAW,CAAG,EAAE,CACnCxF,YAAY,CAAC4D,KAAK,CAAC6B,MAAM,CAAG,EAAE,CAE9B;AACAhG,YAAY,CAACQ,OAAO,CAAC,CACvB,CAAC,CAAC,CACJ,CAAC,CAAE,CAACJ,OAAO,CAAEJ,YAAY,CAAC,CAAC,CAE3B,KAAM,CAAAiG,gBAAgB,CAAG1G,WAAW,CAAC,IAAM,CACzC,GAAI,CAACU,eAAe,CAACiG,OAAO,CAAE,OAE9B,KAAM,CAAAC,aAAa,CAAGrF,QAAQ,CAACkD,aAAa,CAAC,KAAK,CAAC,CACnDmC,aAAa,CAAClC,SAAS,CAAG,gBAAgB,CAC1CkC,aAAa,CAACjC,SAAS,4qBAiBtB,CAED;AACAjE,eAAe,CAACiG,OAAO,CAACE,YAAY,CAACD,aAAa,CAAElG,eAAe,CAACiG,OAAO,CAACG,UAAU,CAAC,CACzF,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAC,gBAAgB,CAAG/G,WAAW,CAAC,IAAM,CACzC,GAAI,CAACU,eAAe,CAACiG,OAAO,CAAE,OAE9B,KAAM,CAAAK,YAAY,CAAGtG,eAAe,CAACiG,OAAO,CAACM,gBAAgB,CAAC,qBAAqB,CAAC,CAEpFD,YAAY,CAAC5C,OAAO,CAAC8C,WAAW,EAAI,CAClC,KAAM,CAAAjG,OAAO,CAAGiG,WAAW,CAACC,YAAY,CAAC,eAAe,CAAC,CACzD,GAAIlG,OAAO,EAAIA,OAAO,CAACyC,MAAM,GAAK,CAAC,CAAE,CACnC,KAAM,CAAA1C,YAAY,CAAGN,eAAe,CAACiG,OAAO,CAACS,aAAa,KAAAjE,MAAA,CAAKlC,OAAO,CAAE,CAAC,CAEzE,GAAID,YAAY,CAAE,CAChB,GAAI,CAAAqG,SAAS,CAAG,SAAS,CAAE;AAE3B,GAAIrG,YAAY,CAACsG,SAAS,CAACC,QAAQ,CAAC,iBAAiB,CAAC,EAAIvG,YAAY,CAAC4D,KAAK,CAAC4C,IAAI,GAAK,SAAS,CAAE,CAC/FH,SAAS,CAAG,SAAS,CAAE;AACzB,CAAC,IAAM,IAAIrG,YAAY,CAACsG,SAAS,CAACC,QAAQ,CAAC,WAAW,CAAC,EAAIvG,YAAY,CAAC4D,KAAK,CAAC4C,IAAI,GAAK,SAAS,CAAE,CAChGH,SAAS,CAAG,SAAS,CAAE;AACzB,CAAC,IAAM,IAAIrG,YAAY,CAACsG,SAAS,CAACC,QAAQ,CAAC,oBAAoB,CAAC,EAAIvG,YAAY,CAAC4D,KAAK,CAAC4C,IAAI,GAAK,SAAS,CAAE,CACzGH,SAAS,CAAG,SAAS,CAAE;AACzB,CAEAH,WAAW,CAACtC,KAAK,CAAC6C,WAAW,CAAC,MAAM,CAAEJ,SAAS,CAAE,WAAW,CAAC,CAC7DH,WAAW,CAACzF,YAAY,CAAC,MAAM,CAAE4F,SAAS,CAAC,CAC7C,CACF,CACF,CAAC,CAAC,CACJ,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAK,SAAS,CAAG1H,WAAW,CAAC,IAAM,CAClC,GAAI,CAACU,eAAe,CAACiG,OAAO,CAAE,OAE9B;AACA,KAAM,CAAAgB,aAAa,CAAGjH,eAAe,CAACiG,OAAO,CAACM,gBAAgB,CAAC,QAAQ,CAAC,CACxEU,aAAa,CAACvD,OAAO,CAACpD,YAAY,EAAI,CACpCA,YAAY,CAACsG,SAAS,CAACM,MAAM,CAAC,iBAAiB,CAAE,WAAW,CAAE,oBAAoB,CAAC,CACnF5G,YAAY,CAAC4D,KAAK,CAAC6C,WAAW,CAAC,MAAM,CAAE,SAAS,CAAE,WAAW,CAAC,CAChE,CAAC,CAAC,CAEF;AACAlH,cAAc,CAAC6D,OAAO,CAACyD,SAAS,EAAI,CAClC,KAAM,CAAA7G,YAAY,CAAGN,eAAe,CAACiG,OAAO,CAACS,aAAa,KAAAjE,MAAA,CAAK0E,SAAS,CAAE,CAAC,CAC3E,GAAI7G,YAAY,CAAE,CAChB,KAAM,CAAA+B,SAAS,CAAG9C,eAAe,CAAC4H,SAAS,CAAC,CAC5C,KAAM,CAAAC,YAAY,CAAG/E,SAAS,CAACgB,KAAK,CAACvD,UAAU,CAAC,CAEhD,GAAIsH,YAAY,GAAK,UAAU,CAAE,CAC/B9G,YAAY,CAACsG,SAAS,CAACS,GAAG,CAAC,iBAAiB,CAAC,CAC7C/G,YAAY,CAAC4D,KAAK,CAAC4C,IAAI,CAAG,SAAS,CACrC,CAAC,IAAM,IAAIM,YAAY,GAAK,aAAa,CAAE,CACzC9G,YAAY,CAACsG,SAAS,CAACS,GAAG,CAAC,oBAAoB,CAAC,CAChD/G,YAAY,CAAC4D,KAAK,CAAC4C,IAAI,CAAG,SAAS,CACrC,CAAC,IAAM,IAAIM,YAAY,GAAK,cAAc,CAAE,CAC1C9G,YAAY,CAACsG,SAAS,CAACS,GAAG,CAAC,WAAW,CAAC,CACvC/G,YAAY,CAAC4D,KAAK,CAAC4C,IAAI,CAAG,SAAS,CACrC,CACF,CACF,CAAC,CAAC,CAEF;AACAT,gBAAgB,CAAC,CAAC,CACpB,CAAC,CAAE,CAACxG,cAAc,CAAEC,UAAU,CAAEuG,gBAAgB,CAAC,CAAC,CAElD,KAAM,CAAAiB,UAAU,CAAGhI,WAAW,CAAC,SAAY,CACzC,GAAI,CACF,KAAM,CAAAiI,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAAC,SAAS,CAAC,CACvC,GAAI,CAACD,QAAQ,CAACE,EAAE,CAAE,CAChB,KAAM,IAAI,CAAAC,KAAK,wBAAAjF,MAAA,CAAwB8E,QAAQ,CAAChE,MAAM,CAAE,CAAC,CAC3D,CACA,KAAM,CAAAoE,UAAU,CAAG,KAAM,CAAAJ,QAAQ,CAAC3G,IAAI,CAAC,CAAC,CAExC,GAAIZ,eAAe,CAACiG,OAAO,CAAE,CAC3BjG,eAAe,CAACiG,OAAO,CAAChC,SAAS,CAAG0D,UAAU,CAE9C,KAAM,CAAAC,GAAG,CAAG5H,eAAe,CAACiG,OAAO,CAACS,aAAa,CAAC,KAAK,CAAC,CACxD,GAAIkB,GAAG,CAAE,CACPA,GAAG,CAAChB,SAAS,CAACS,GAAG,CAAC,SAAS,CAAC,CAC5BO,GAAG,CAAC7G,YAAY,CAAC,SAAS,CAAE,cAAc,CAAC,CAC3C6G,GAAG,CAAC1D,KAAK,CAACzC,KAAK,CAAG,MAAM,CACxBmG,GAAG,CAAC1D,KAAK,CAACxC,MAAM,CAAG,MAAM,CACzBkG,GAAG,CAAC1D,KAAK,CAAC2D,SAAS,CAAG,OAAO,CAC7BD,GAAG,CAAC1D,KAAK,CAAC4D,MAAM,CAAG,QAAQ,CAE3B;AACA,KAAM,CAAAC,MAAM,CAAGH,GAAG,CAACrB,gBAAgB,CAAC,UAAU,CAAC,CAC/C,GAAI,CAAAyB,aAAa,CAAG,CAAC,CACrB,GAAI,CAAAC,aAAa,CAAG,CAAC,CAErBF,MAAM,CAACrE,OAAO,CAACwE,KAAK,EAAI,CACtB;AACAA,KAAK,CAACC,eAAe,CAAC,OAAO,CAAC,CAC9BD,KAAK,CAACC,eAAe,CAAC,MAAM,CAAC,CAE7B;AACAD,KAAK,CAAChE,KAAK,CAAC6C,WAAW,CAAC,MAAM,CAAE,SAAS,CAAE,WAAW,CAAC,CACvDmB,KAAK,CAAChE,KAAK,CAACkE,MAAM,CAAG,SAAS,CAC9BF,KAAK,CAAChE,KAAK,CAACmE,UAAU,CAAG,8BAA8B,CACvDH,KAAK,CAAChE,KAAK,CAACC,QAAQ,CAAG,UAAU,CAEjC;AACA+D,KAAK,CAACtB,SAAS,CAACS,GAAG,CAAC,OAAO,CAAE,WAAW,CAAC,CAEzC;AACA,GAAIhH,aAAa,CAAC6H,KAAK,CAAC,CAAE,CACxBF,aAAa,EAAE,CACjB,CAEA;AACA5F,eAAe,CAAC8F,KAAK,CAAC,CACtBD,aAAa,EAAE,CAEf;AACApC,oBAAoB,CAACqC,KAAK,CAAC,CAE3BI,OAAO,CAACC,GAAG,gBAAA9F,MAAA,CAAgByF,KAAK,CAAC1H,EAAE,iBAAAiC,MAAA,CAAeyF,KAAK,CAAChE,KAAK,CAAC4C,IAAI,CAAE,CAAC,CACvE,CAAC,CAAC,CAEFwB,OAAO,CAACC,GAAG,WAAA9F,MAAA,CAAWsF,MAAM,CAAC/E,MAAM,oBAAkB,CAAC,CACtDsF,OAAO,CAACC,GAAG,oBAAA9F,MAAA,CAAoBuF,aAAa,WAAS,CAAC,CACtDM,OAAO,CAACC,GAAG,sBAAA9F,MAAA,CAAsBwF,aAAa,WAAS,CAAC,CAC1D,CAEA;AACAjC,gBAAgB,CAAC,CAAC,CAElB9F,YAAY,CAAC,IAAI,CAAC,CACpB,CACF,CAAE,MAAOsI,KAAK,CAAE,CACdF,OAAO,CAACE,KAAK,CAAC,oBAAoB,CAAEA,KAAK,CAAC,CAC1C,GAAIxI,eAAe,CAACiG,OAAO,CAAE,CAC3BjG,eAAe,CAACiG,OAAO,CAAChC,SAAS,gYAAAxB,MAAA,CAIA+F,KAAK,CAACC,OAAO,sIAG7C,CACH,CACF,CACF,CAAC,CAAE,CAACpI,aAAa,CAAE+B,eAAe,CAAEyD,oBAAoB,CAAEG,gBAAgB,CAAC,CAAC,CAE5E7G,SAAS,CAAC,IAAM,CACdmI,UAAU,CAAC,CAAC,CACd,CAAC,CAAE,CAACA,UAAU,CAAC,CAAC,CAEhBnI,SAAS,CAAC,IAAM,CACd,GAAIc,SAAS,CAAE,CACb+G,SAAS,CAAC,CAAC,CACb,CACF,CAAC,CAAE,CAAC/G,SAAS,CAAE+G,SAAS,CAAC,CAAC,CAE1B,mBACEtH,IAAA,QAAKc,EAAE,CAAC,cAAc,CAACkI,GAAG,CAAE1I,eAAgB,CAEvC,CAAC,CAEV,CAAC,CAED,cAAe,CAAAL,KAAK","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}